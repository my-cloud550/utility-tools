<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Í∏ÄÏûêÏàò ÏÑ∏Í∏∞, ÌçºÏÑºÌä∏ Í≥ÑÏÇ∞Í∏∞, Ïù¥ÎØ∏ÏßÄ Î≥ÄÌôò, ÌÉÄÏù¥Î®∏ Îì± ÏÉùÌôú ÌïÑÏàò Ïú†Ìã∏Î¶¨Ìã∞ Î™®Ïùå. Î≥ÑÎèÑ ÏÑ§Ïπò ÏóÜÏù¥ Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú Î∞îÎ°ú ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.">
    <meta name="keywords" content="Í∏ÄÏûêÏàòÏÑ∏Í∏∞, ÌçºÏÑºÌä∏Í≥ÑÏÇ∞Í∏∞, Ïù¥ÎØ∏ÏßÄÎ≥ÄÌôò, webpÎ≥ÄÌôò, ÎΩÄÎ™®ÎèÑÎ°úÌÉÄÏù¥Î®∏, ÎπÑÎ∞ÄÎ≤àÌò∏ÏÉùÏÑ±, Î°úÎòêÎ≤àÌò∏, ÎîîÎç∞Ïù¥Í≥ÑÏÇ∞">
    <title>Utility Box - Ïò®ÎùºÏù∏ ÎßåÎä• ÎèÑÍµ¨ ÏÉÅÏûê</title>
    <!-- ÌååÎπÑÏΩò -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì¶</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Pretendard', 'Inter', 'Noto Sans KR', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 900: '#1e3a8a' },
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'bounce-short': 'bounceShort 0.5s ease-in-out 1',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { transform: 'translateY(10px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        bounceShort: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } }
                    }
                }
            }
        }
    </script>

    <!-- React Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Icons (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }

        /* Hide Number Input Arrows */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="text-slate-800 h-screen overflow-hidden selection:bg-brand-100 selection:text-brand-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        // --- Data & Translations ---
        const translations = {
            ko: {
                title: "Utility Box",
                subtitle: "ÏÉùÌôú ÌïÑÏàò Ïõπ ÎèÑÍµ¨ Î™®Ïùå",
                categories: { text: "ÌÖçÏä§Ìä∏ ÎèÑÍµ¨", math: "Í≥ÑÏÇ∞ ÎèÑÍµ¨", media: "ÎØ∏ÎîîÏñ¥ ÎèÑÍµ¨", time: "ÏãúÍ∞Ñ Í¥ÄÎ¶¨", security: "Î≥¥Ïïà", fun: "Ïû¨ÎØ∏" },
                tools: {
                    text: "Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞",
                    percent: "ÎßåÎä• ÌçºÏÑºÌä∏ Í≥ÑÏÇ∞",
                    discount: "Ìï†Ïù∏Ïú® Í≥ÑÏÇ∞",
                    image: "Ïù¥ÎØ∏ÏßÄ Ïö©Îüâ Ï§ÑÏù¥Í∏∞",
                    unit: "Îã®ÏúÑ Î≥ÄÌôò",
                    stopwatch: "Ïä§ÌÜ±ÏõåÏπò",
                    pomodoro: "Ìè¨Î™®ÎèÑÎ°ú ÌÉÄÏù¥Î®∏",
                    dday: "D-Day Í≥ÑÏÇ∞Í∏∞",
                    password: "ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±",
                    lotto: "Î°úÎòê Î≤àÌò∏ Ï∂îÏ≤®"
                },
                seo: {
                    text: {
                        title: "üìù ÏûêÏÜåÏÑú/Î∏îÎ°úÍ∑∏ ÌïÑÏàò! Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞",
                        desc: "ÏûêÍ∏∞ÏÜåÍ∞úÏÑú ÏûëÏÑ± Ïãú 500Ïûê, 1000Ïûê Ï†úÌïúÏùÑ ÎßûÏ∂îÍ∏∞ ÏúÑÌï¥ Í≥µÎ∞± Ìè¨Ìï®/Ï†úÏô∏ Í∏ÄÏûê ÏàòÎ•º Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÌôïÏù∏ÌïòÏÑ∏Ïöî. ÎÑ§Ïù¥Î≤Ñ Í∏ÄÏûêÏàòÏÑ∏Í∏∞ÏôÄ ÎèôÏùºÌïú Í∏∞Ï§ÄÏúºÎ°ú Ï†úÍ≥µÎê©ÎãàÎã§.",
                        tags: ["#ÏûêÏÜåÏÑúÍ∏ÄÏûêÏàò", "#Í≥µÎ∞±Ï†úÏô∏", "#Ïù¥Î†•ÏÑú", "#Î∏îÎ°úÍ∑∏Í∏ÄÏûêÏàò"]
                    },
                    percent: {
                        title: "üßÆ ÏóëÏÖÄ ÏóÜÏù¥ Î∞îÎ°ú Ïì∞Îäî ÌçºÏÑºÌä∏ Í≥ÑÏÇ∞Í∏∞",
                        desc: "Ï†ÑÏ≤¥ Í∞íÏóêÏÑú ÏùºÏ†ï ÎπÑÏú®ÏùÄ ÏñºÎßàÏù∏ÏßÄ, Í∞íÏù¥ Î≥ÄÌñàÏùÑ Îïå Ï¶ùÍ∞ÄÏú®ÏùÄ Î™á ÌçºÏÑºÌä∏Ïù∏ÏßÄ Ìó∑Í∞àÎ¶¥ Îïå ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî. Ï£ºÏãù ÏàòÏùµÎ•†, Ïó∞Î¥â Ïù∏ÏÉÅÎ•† Í≥ÑÏÇ∞Ïóê Ïú†Ïö©Ìï©ÎãàÎã§.",
                        tags: ["#ÌçºÏÑºÌä∏Í≥ÑÏÇ∞", "#ÏàòÏùµÎ•†Í≥ÑÏÇ∞", "#Ï¶ùÍ∞êÏú®", "#ÎπÑÏú®Í≥ÑÏÇ∞"]
                    },
                    image: {
                        title: "üñºÔ∏è ÏÑúÎ≤Ñ Ï†ÑÏÜ° ÏóÜÎäî Ïù¥ÎØ∏ÏßÄ Î≥ÄÌôò (WebP)",
                        desc: "JPG, PNG Ïù¥ÎØ∏ÏßÄÎ•º ÏµúÏã† Ïõπ ÌëúÏ§Ä Ìè¨Îß∑Ïù∏ WebPÎ°ú Î≥ÄÌôòÌïòÏó¨ Ïö©ÎüâÏùÑ ÌöçÍ∏∞Ï†ÅÏúºÎ°ú Ï§ÑÏù¥ÏÑ∏Ïöî. Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏÑúÎ≤ÑÎ°ú Ï†ÑÏÜ°ÎêòÏßÄ ÏïäÏïÑ 100% ÏïàÏ†ÑÌï©ÎãàÎã§.",
                        tags: ["#Ïù¥ÎØ∏ÏßÄÏïïÏ∂ï", "#WebPÎ≥ÄÌôò", "#ÏÇ¨ÏßÑÏö©ÎüâÏ§ÑÏù¥Í∏∞", "#Î∏îÎ°úÍ∑∏Ïù¥ÎØ∏ÏßÄ"]
                    },
                    discount: { title: "üõçÔ∏è ÏáºÌïë ÌïÑÏàòÌÖú Ìï†Ïù∏ Í≥ÑÏÇ∞Í∏∞", desc: "20%, 30% ÏÑ∏Ïùº? Ïã§Ï†ú ÏñºÎßàÎ•º ÎÇ¥Ïïº ÌïòÎäîÏßÄ Î∞îÎ°ú ÌôïÏù∏ÌïòÏÑ∏Ïöî.", tags: ["#ÏÑ∏ÏùºÍ≥ÑÏÇ∞", "#Ìï†Ïù∏Í∞ÄÍ≤©"] },
                    unit: { title: "üìè Í∞ÑÌé∏Ìïú Îã®ÏúÑ Î≥ÄÌôò", desc: "Í∏∏Ïù¥, Î¨¥Í≤å, Ïò®ÎèÑ Îì± Ìó∑Í∞àÎ¶¨Îäî Îã®ÏúÑÎ•º Ìïú Î≤àÏóê Î≥ÄÌôòÌïòÏÑ∏Ïöî.", tags: ["#ÌèâÏàòÍ≥ÑÏÇ∞", "#Ïù∏ÏπòÏÑºÏπò"] },
                    stopwatch: { title: "‚è±Ô∏è Ï†ïÎ∞Ä Ïä§ÌÜ±ÏõåÏπò", desc: "Í≥µÎ∂Ä, Ïö¥Îèô, ÏöîÎ¶¨Ìï† Îïå ÌïÑÏöîÌïú Ï¥àÏ†ïÎ∞Ä Ïä§ÌÜ±ÏõåÏπòÏûÖÎãàÎã§.", tags: ["#Ïä§ÌÜ±ÏõåÏπò", "#ÌÉÄÏù¥Î®∏"] },
                    pomodoro: { title: "üçÖ ÎΩÄÎ™®ÎèÑÎ°ú ÏßëÏ§ë ÌÉÄÏù¥Î®∏", desc: "25Î∂Ñ ÏßëÏ§ë, 5Î∂Ñ Ìú¥Ïãù. ÎΩÄÎ™®ÎèÑÎ°ú Í∏∞Î≤ïÏúºÎ°ú ÏÉùÏÇ∞ÏÑ±ÏùÑ Í∑πÎåÄÌôîÌïòÏÑ∏Ïöî.", tags: ["#Í≥µÎ∂ÄÌÉÄÏù¥Î®∏", "#ÏßëÏ§ëÎ†•"] },
                    dday: { title: "üìÖ D-Day ÎÇ†Ïßú Í≥ÑÏÇ∞", desc: "Í∏∞ÎÖêÏùº, ÏãúÌóò, Î™©ÌëúÏùºÍπåÏßÄ ÎÇ®ÏùÄ ÎÇ†ÏßúÎ•º Í≥ÑÏÇ∞Ìï¥Î≥¥ÏÑ∏Ïöî.", tags: ["#ÎîîÎç∞Ïù¥", "#ÎÇ†ÏßúÍ≥ÑÏÇ∞"] },
                    password: { title: "üîí Í∞ïÎ†•Ìïú ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±", desc: "Ìï¥ÌÇπ Í±±Ï†ï ÏóÜÎäî Î¨¥ÏûëÏúÑ ÌäπÏàòÎ¨∏Ïûê Ìè¨Ìï® ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§.", tags: ["#ÎπÑÎ∞ÄÎ≤àÌò∏", "#Î≥¥Ïïà"] },
                    lotto: { title: "üçÄ Î°úÎòê Î≤àÌò∏ ÏÉùÏÑ±", desc: "Ïù¥Î≤à Ï£º ÌñâÏö¥Ïùò Î≤àÌò∏Î•º Ïû¨ÎØ∏Î°ú ÎΩëÏïÑÎ≥¥ÏÑ∏Ïöî.", tags: ["#Î°úÎòê", "#ÌñâÏö¥"] },
                },
                wordCounter: { placeholder: "ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÍ±∞ÎÇò Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî...", withSpace: "Í≥µÎ∞± Ìè¨Ìï®", noSpace: "Í≥µÎ∞± Ï†úÏô∏", words: "Îã®Ïñ¥ Ïàò", lines: "Ï§Ñ Ïàò" },
                percent: { title: "ÌçºÏÑºÌä∏ Í≥ÑÏÇ∞", label1: "Ï†ÑÏ≤¥Í∞íÏùò", label2: "%Îäî?", label3: "Í∞íÏùÄ", type1: "ÎπÑÏú® Í≥ÑÏÇ∞", type2: "Í∏∞Ï§ÄÍ∞í Í≥ÑÏÇ∞", type3: "Ï¶ùÍ∞êÏú®" },
                image: { drop: "Ïù¥ÎØ∏ÏßÄÎ•º Ïù¥Í≥≥Ïóê ÎìúÎûòÍ∑∏ÌïòÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî", converting: "Î≥ÄÌôò Ï§ë...", download: "Îã§Ïö¥Î°úÎìú", quality: "ÌôîÏßà ÏÑ§Ï†ï", original: "ÏõêÎ≥∏", converted: "Î≥ÄÌôòÎê®" },
                discount: { price: "ÏõêÎûò Í∞ÄÍ≤©", rate: "Ìï†Ïù∏Ïú® (%)", saved: "Ìï†Ïù∏ Í∏àÏï°", final: "ÏµúÏ¢Ö Í∞ÄÍ≤©" },
                unit: { 
                    input: "ÏûÖÎ†•Í∞í", 
                    result: "Î≥ÄÌôòÍ∞í", 
                    types: { length: "Í∏∏Ïù¥", weight: "Î¨¥Í≤å", temp: "Ïò®ÎèÑ" },
                    tempLabels: {
                        Celsius: "ÏÑ≠Ïî® (¬∞C)",
                        Fahrenheit: "ÌôîÏî® (¬∞F)",
                        Newton: "Îâ¥ÌÑ¥ (¬∞N)",
                        Delisle: "ÎçúÎ¶¥ (¬∞De)",
                        Kelvin: "ÏºàÎπà (K)",
                        Reaumur: "Ïó¥Ïî® (¬∞R)",
                        Rankine: "Îû≠ÌÇ® (¬∞Ra)",
                        Romer: "Î°úÎ®∏ (¬∞R√∏)"
                    }
                },
                stopwatch: { start: "ÏãúÏûë", stop: "Ï†ïÏßÄ", reset: "Ï¥àÍ∏∞Ìôî" },
                pomodoro: { 
                    statusWork: "üî• ÏßëÏ§ë ÏãúÍ∞Ñ", 
                    statusBreak: "‚òï Ìú¥Ïãù ÏãúÍ∞Ñ", 
                    start: "ÏãúÏûë", 
                    pause: "ÏùºÏãúÏ†ïÏßÄ", 
                    reset: "Î¶¨ÏÖã", 
                    switchWork: "ÏßëÏ§ë Î™®ÎìúÎ°ú", 
                    switchBreak: "Ìú¥Ïãù Î™®ÎìúÎ°ú",
                    setting: "ÏãúÍ∞Ñ ÏÑ§Ï†ï (Î∂Ñ)",
                    labelWork: "ÏßëÏ§ë",
                    labelBreak: "Ìú¥Ïãù"
                },
                password: { length: "Í∏∏Ïù¥", numbers: "Ïà´Ïûê (0-9)", symbols: "ÌäπÏàòÎ¨∏Ïûê (!@#)", generate: "ÏÉàÎ°ú ÏÉùÏÑ±", copied: "Î≥µÏÇ¨ ÏôÑÎ£å!" },
                dday: { label: "ÎÇ†Ïßú ÏÑ†ÌÉù", guide: "Í∏∞ÎÖêÏùºÏù¥ÎÇò Î™©ÌëúÏùºÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî", isToday: "üéâ Ïò§ÎäòÏûÖÎãàÎã§!", daysLeft: "Ïùº ÎÇ®Ïùå", daysPast: "Ïùº ÏßÄÎÇ®" },
                lotto: { btn: "Î≤àÌò∏ Ï∂îÏ≤®ÌïòÍ∏∞", guide: "ÌñâÏö¥Ïùò Î≤àÌò∏Î•º ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî" },
                ad: "Í¥ëÍ≥† ÏòÅÏó≠"
            },
            en: {
                title: "Utility Box",
                subtitle: "Essential Web Tools",
                categories: { text: "Text", math: "Math", media: "Media", time: "Time", security: "Security", fun: "Fun" },
                tools: { text: "Word Counter", percent: "Percent Calc", discount: "Discount Calc", image: "Image Converter", unit: "Unit Converter", stopwatch: "Stopwatch", pomodoro: "Pomodoro", dday: "D-Day", password: "Password", lotto: "Lotto" },
                seo: {
                    text: { title: "Word Counter", desc: "Count characters, words, and lines instantly.", tags: ["#wordcount"] },
                    percent: { title: "Percentage Calculator", desc: "Calculate percentages easily.", tags: ["#percent"] },
                    image: { title: "Image Converter", desc: "Convert images to WebP locally.", tags: ["#webp"] },
                    discount: { title: "Discount Calculator", desc: "Calculate final price and savings.", tags: ["#discount"] },
                    unit: { title: "Unit Converter", desc: "Convert length, weight, and temperature.", tags: ["#converter"] },
                    stopwatch: { title: "Stopwatch", desc: "Precise stopwatch for various activities.", tags: ["#stopwatch"] },
                    pomodoro: { title: "Pomodoro Timer", desc: "Boost productivity with focus timer.", tags: ["#pomodoro"] },
                    dday: { title: "D-Day Counter", desc: "Calculate days until your event.", tags: ["#dday"] },
                    password: { title: "Password Generator", desc: "Create secure passwords instantly.", tags: ["#security"] },
                    lotto: { title: "Lotto Generator", desc: "Generate random lucky numbers.", tags: ["#lotto"] }
                },
                wordCounter: { placeholder: "Type here...", withSpace: "Chars", noSpace: "No Space", words: "Words", lines: "Lines" },
                percent: { title: "Percent Calc", label1: "What is", label2: "% of?", label3: "Result", type1: "Percentage", type2: "Of Value", type3: "Change" },
                image: { drop: "Drag & Drop or Click", converting: "Converting...", download: "Download", quality: "Quality", original: "Original", converted: "Converted" },
                discount: { price: "Original Price", rate: "Discount (%)", saved: "You Save", final: "Final Price" },
                unit: { 
                    input: "Input", 
                    result: "Result", 
                    types: { length: "Length", weight: "Weight", temp: "Temp" },
                    tempLabels: {
                        Celsius: "Celsius (¬∞C)",
                        Fahrenheit: "Fahrenheit (¬∞F)",
                        Newton: "Newton (¬∞N)",
                        Delisle: "Delisle (¬∞De)",
                        Kelvin: "Kelvin (K)",
                        Reaumur: "R√©aumur (¬∞R)",
                        Rankine: "Rankine (¬∞Ra)",
                        Romer: "R√∏mer (¬∞R√∏)"
                    }
                },
                stopwatch: { start: "Start", stop: "Stop", reset: "Reset" },
                pomodoro: { 
                    statusWork: "üî• Focus Time", 
                    statusBreak: "‚òï Break Time", 
                    start: "Start", 
                    pause: "Pause", 
                    reset: "Reset", 
                    switchWork: "Switch to Focus", 
                    switchBreak: "Switch to Break",
                    setting: "Settings (min)",
                    labelWork: "Focus",
                    labelBreak: "Break"
                },
                password: { length: "Length", numbers: "Numbers", symbols: "Symbols", generate: "Generate", copied: "Copied!" },
                dday: { label: "Target Date", guide: "Select your target date", isToday: "üéâ It's Today!", daysLeft: "days left", daysPast: "days past" },
                lotto: { btn: "Draw Numbers", guide: "Check your lucky numbers" },
                ad: "Ad Space"
            }
        };

        // --- Common Components ---
        // üöÄ ÏïàÏ†ïÏ†ÅÏù∏ ÏïÑÏù¥ÏΩò Î†åÎçîÎßÅ Ïª¥Ìè¨ÎÑåÌä∏ (Îπà ÌéòÏù¥ÏßÄ Ïò§Î•ò Ìï¥Í≤∞)
        // ÏßÅÏ†ë SVG ÏΩîÎìúÎ•º Ï°∞ÏûëÌïòÏßÄ ÏïäÍ≥†, ÏïàÏ†ÑÌïú i ÌÉúÍ∑∏ + createIcons Î∞©Ïãù ÏÇ¨Ïö©
        const Icon = React.memo(({ name, size = 20, className = "" }) => {
            const iconRef = useRef(null);

            useEffect(() => {
                if (window.lucide && window.lucide.createIcons) {
                    window.lucide.createIcons({
                        root: iconRef.current ? iconRef.current.parentNode : document.body,
                        nameAttr: 'data-lucide',
                        attrs: {
                            class: className,
                            width: size,
                            height: size,
                            'stroke-width': 2
                        }
                    });
                }
            }, [name, size, className]);

            // Î†àÏù¥ÏïÑÏõÉ ÏãúÌîÑÌä∏ Î∞©ÏßÄÎ•º ÏúÑÌï¥ display: inline-block Î∞è ÌÅ¨Í∏∞ ÏßÄÏ†ï
            return (
                <span ref={iconRef} className="inline-flex items-center justify-center align-middle" style={{ width: size, height: size }}>
                    <i data-lucide={name} style={{ width: size, height: size, display: 'block' }}></i>
                </span>
            );
        });

        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-2xl shadow-sm border border-slate-100 p-6 animate-slide-up ${className}`}>{children}</div>
        );

        const Button = ({ children, onClick, variant = "primary", className = "", ...props }) => {
            const base = "px-5 py-2.5 rounded-xl font-medium transition-all active:scale-95 flex items-center justify-center gap-2 text-sm";
            const variants = {
                primary: "bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-200",
                secondary: "bg-slate-100 hover:bg-slate-200 text-slate-700",
                outline: "border border-slate-200 hover:border-blue-500 hover:text-blue-600 text-slate-600",
                success: "bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-200",
                danger: "bg-rose-500 hover:bg-rose-600 text-white shadow-rose-200"
            };
            return <button onClick={onClick} className={`${base} ${variants[variant]} ${className}`} {...props}>
                {children}
            </button>;
        };

        const InputGroup = ({ label, children }) => (
            <div className="space-y-2">
                <label className="text-xs font-bold text-slate-400 uppercase tracking-wider ml-1">{label}</label>
                {children}
            </div>
        );

        // --- Tools Implementation ---

        // 1. Image Converter
        const ImageTools = ({ t }) => {
            const [file, setFile] = useState(null);
            const [preview, setPreview] = useState(null);
            const [converted, setConverted] = useState(null);
            const [quality, setQuality] = useState(0.8);
            const [loading, setLoading] = useState(false);
            const canvasRef = useRef(null);

            const handleFile = (e) => {
                const f = e.target.files?.[0];
                if (f) {
                    setFile(f);
                    setPreview(URL.createObjectURL(f));
                    setConverted(null);
                }
            };

            const convertToWebP = useCallback(() => {
                if (!file) return;
                setLoading(true);
                const img = new Image();
                img.src = preview;
                img.onload = () => {
                    const canvas = canvasRef.current;
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    const dataUrl = canvas.toDataURL('image/webp', quality);
                    setConverted(dataUrl);
                    setLoading(false);
                };
            }, [file, preview, quality]);

            return (
                <div className="space-y-6">
                    <canvas ref={canvasRef} style={{ display: 'none' }}></canvas>
                    {!file ? (
                        <div className="border-2 border-dashed border-slate-300 rounded-2xl h-64 flex flex-col items-center justify-center text-slate-400 bg-slate-50 hover:bg-slate-100 transition-colors cursor-pointer relative">
                            <input type="file" accept="image/*" onChange={handleFile} className="absolute inset-0 opacity-0 cursor-pointer" />
                            <Icon name="image-plus" size={48} className="mb-4 text-slate-300" />
                            <p className="font-medium">{t.image.drop}</p>
                            <span className="text-xs mt-2 text-slate-400">JPG, PNG ‚Üí WebP</span>
                        </div>
                    ) : (
                        <div className="space-y-6">
                            <div className="grid md:grid-cols-2 gap-6">
                                <div className="space-y-2">
                                    <span className="text-xs font-bold text-slate-400 uppercase">{t.image.original}</span>
                                    <img src={preview} alt="Original" className="w-full h-48 object-contain bg-slate-100 rounded-xl border border-slate-200" />
                                    <div className="text-xs text-center text-slate-500">{(file.size / 1024).toFixed(1)} KB</div>
                                </div>
                                <div className="space-y-2">
                                    <span className="text-xs font-bold text-slate-400 uppercase">{t.image.converted}</span>
                                    {converted ? (
                                        <>
                                            <img src={converted} alt="Converted" className="w-full h-48 object-contain bg-slate-100 rounded-xl border border-slate-200" />
                                            <div className="text-xs text-center text-blue-500 font-bold">{((converted.length * 3 / 4) / 1024).toFixed(1)} KB (Est.)</div>
                                        </>
                                    ) : (
                                        <div className="w-full h-48 bg-slate-50 rounded-xl border border-slate-200 flex items-center justify-center text-slate-400">Waiting...</div>
                                    )}
                                </div>
                            </div>
                            <div className="bg-slate-50 p-4 rounded-xl space-y-4">
                                <div className="flex items-center justify-between">
                                    <span className="text-sm font-medium text-slate-600">{t.image.quality}: {Math.round(quality * 100)}%</span>
                                </div>
                                <input type="range" min="0.1" max="1" step="0.1" value={quality} onChange={e => setQuality(parseFloat(e.target.value))} className="w-full accent-blue-600" />
                                <div className="flex gap-3">
                                    <Button onClick={convertToWebP} className="flex-1">{loading ? t.image.converting : "WebP Î≥ÄÌôòÌïòÍ∏∞"}</Button>
                                    {converted && (
                                        <a href={converted} download={`converted_${Date.now()}.webp`} className="flex-1">
                                            <Button variant="success" className="w-full"><Icon name="download" size={18} className="mr-2 text-white" /> {t.image.download}</Button>
                                        </a>
                                    )}
                                    <Button variant="secondary" onClick={() => {setFile(null); setConverted(null);}}><Icon name="x" size={18} /></Button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // 2. Percent Calculator
        const PercentCalculator = ({ t }) => {
            const [mode, setMode] = useState(0);
            const [val1, setVal1] = useState('');
            const [val2, setVal2] = useState('');

            const result = useMemo(() => {
                const v1 = parseFloat(val1);
                const v2 = parseFloat(val2);
                if (isNaN(v1) || isNaN(v2)) return 0;
                if (mode === 0) return v1 * (v2 / 100);
                if (mode === 1) return (v1 / v2) * 100;
                if (mode === 2) return ((v2 - v1) / v1) * 100;
                return 0;
            }, [mode, val1, val2]);

            const modes = [
                { label: t.percent.type1, desc: t.percent.label1 + " X " + t.percent.label2 },
                { label: t.percent.type2, desc: "X " + t.percent.label2 + " Y?" },
                { label: t.percent.type3, desc: "X ‚Üí Y " + t.percent.type3 }
            ];

            return (
                <div className="space-y-6">
                    <div className="flex p-1 bg-slate-100 rounded-xl overflow-x-auto">
                        {modes.map((m, i) => (
                            <button key={i} onClick={() => setMode(i)} className={`flex-1 py-2 px-3 text-xs md:text-sm font-bold rounded-lg whitespace-nowrap transition-all ${mode === i ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500'}`}>{m.label}</button>
                        ))}
                    </div>
                    <div className="bg-slate-50 p-6 rounded-2xl text-center space-y-2"><p className="text-sm text-slate-500">{modes[mode].desc}</p></div>
                    <div className="flex flex-col md:flex-row items-center gap-4">
                        <input type="number" value={val1} onChange={e => setVal1(e.target.value)} placeholder="A" className="flex-1 w-full p-4 rounded-xl border border-slate-200 focus:border-blue-500 outline-none font-mono text-lg text-center" />
                        <span className="text-slate-400 font-bold">{mode === 2 ? "‚Üí" : "/"}</span>
                        <input type="number" value={val2} onChange={e => setVal2(e.target.value)} placeholder="B" className="flex-1 w-full p-4 rounded-xl border border-slate-200 focus:border-blue-500 outline-none font-mono text-lg text-center" />
                    </div>
                    <div className="bg-blue-600 text-white p-6 rounded-2xl flex flex-col items-center justify-center shadow-lg shadow-blue-200">
                        <span className="text-blue-200 text-xs font-bold uppercase mb-1">{t.percent.label3}</span>
                        <div className="text-4xl font-bold font-mono">{result.toLocaleString(undefined, { maximumFractionDigits: 2 })}<span className="text-xl ml-1 opacity-70">{mode === 0 ? "" : "%"}</span></div>
                    </div>
                </div>
            );
        };

        // 3. Word Counter
        const WordCounter = ({ t }) => {
            const [text, setText] = useState('');
            const stats = {
                charWithSpace: text.length,
                charNoSpace: text.replace(/\s/g, '').length,
                words: text.trim() === '' ? 0 : text.trim().split(/\s+/).length,
                lines: text === '' ? 0 : text.split(/\n/).length
            };
            return (
                <div className="space-y-4">
                    <textarea value={text} onChange={e => setText(e.target.value)} placeholder={t.wordCounter.placeholder} className="w-full h-48 p-4 rounded-xl bg-slate-50 border border-slate-200 focus:bg-white focus:border-blue-500 outline-none resize-none" />
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 text-center">
                        <div className="p-3 bg-blue-50 rounded-xl text-blue-700"><div className="text-xl font-bold">{stats.charWithSpace}</div><div className="text-xs opacity-70">{t.wordCounter.withSpace}</div></div>
                        <div className="p-3 bg-indigo-50 rounded-xl text-indigo-700"><div className="text-xl font-bold">{stats.charNoSpace}</div><div className="text-xs opacity-70">{t.wordCounter.noSpace}</div></div>
                        <div className="p-3 bg-emerald-50 rounded-xl text-emerald-700"><div className="text-xl font-bold">{stats.words}</div><div className="text-xs opacity-70">{t.wordCounter.words}</div></div>
                        <div className="p-3 bg-amber-50 rounded-xl text-amber-700"><div className="text-xl font-bold">{stats.lines}</div><div className="text-xs opacity-70">{t.wordCounter.lines}</div></div>
                    </div>
                </div>
            );
        };

        // 4. Discount Calculator
        const DiscountCalculator = ({ t }) => {
            const [price, setPrice] = useState('');
            const [discount, setDiscount] = useState('');
            const final = price && discount ? price - (price * (discount / 100)) : 0;
            const saved = price && discount ? price * (discount / 100) : 0;

            return (
                <div className="grid md:grid-cols-2 gap-8 items-start">
                    <div className="space-y-6">
                        <InputGroup label={t.discount.price}>
                            <input type="number" value={price} onChange={e => setPrice(Number(e.target.value))} className="w-full p-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-blue-500 outline-none text-xl font-bold text-slate-700" placeholder="0" />
                        </InputGroup>
                        <InputGroup label={t.discount.rate}>
                            <div className="space-y-3">
                                <div className="flex gap-2">
                                    {[10, 20, 30, 50].map(p => (
                                        <button key={p} onClick={() => setDiscount(p)} className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${discount === p ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`}>{p}%</button>
                                    ))}
                                </div>
                                <input type="number" value={discount} onChange={e => setDiscount(Number(e.target.value))} className="w-full p-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-blue-500 outline-none text-xl font-bold text-slate-700" placeholder="0" />
                            </div>
                        </InputGroup>
                    </div>
                    <div className="bg-slate-900 p-8 rounded-2xl text-white shadow-xl flex flex-col justify-center h-full">
                        <div className="flex justify-between items-center text-slate-400"><span>{t.discount.saved}</span><span className="font-mono text-lg text-blue-400">-{saved.toLocaleString()}</span></div>
                        <div className="h-px bg-slate-700 my-4"></div>
                        <div><div className="text-slate-400 text-sm mb-1">{t.discount.final}</div><div className="text-4xl font-bold font-mono text-white">{final.toLocaleString()}</div></div>
                    </div>
                </div>
            );
        };

        // 5. Unit Converter
        const UnitConverter = ({ t }) => {
            const [category, setCategory] = useState('length');
            const [val, setVal] = useState('');
            const [from, setFrom] = useState('cm');
            const [to, setTo] = useState('inch');
            
            const units = {
                length: ['cm', 'm', 'km', 'inch', 'ft', 'yard'],
                weight: ['kg', 'g', 'lb', 'oz'],
                temp: ['Celsius', 'Fahrenheit', 'Newton', 'Delisle', 'Kelvin', 'Reaumur', 'Rankine', 'Romer']
            };
            
            const convert = () => {
                if(!val) return '';
                const v = parseFloat(val);
                if(category === 'temp') {
                     if (from === to) return v;
                     // 1. Convert to Celsius
                     let c;
                     if (from === 'Celsius') c = v;
                     else if (from === 'Fahrenheit') c = (v - 32) * 5/9;
                     else if (from === 'Newton') c = v * 100/33;
                     else if (from === 'Delisle') c = 100 - v * 2/3;
                     else if (from === 'Kelvin') c = v - 273.15;
                     else if (from === 'Reaumur') c = v * 5/4;
                     else if (from === 'Rankine') c = (v - 491.67) * 5/9;
                     else if (from === 'Romer') c = (v - 7.5) * 40/21;

                     // 2. Convert Celsius to Target
                     let r;
                     if (to === 'Celsius') r = c;
                     else if (to === 'Fahrenheit') r = c * 9/5 + 32;
                     else if (to === 'Newton') r = c * 33/100;
                     else if (to === 'Delisle') r = (100 - c) * 3/2;
                     else if (to === 'Kelvin') r = c + 273.15;
                     else if (to === 'Reaumur') r = c * 4/5;
                     else if (to === 'Rankine') r = (c + 273.15) * 9/5;
                     else if (to === 'Romer') r = c * 21/40 + 7.5;

                     return r.toFixed(2);
                }
                const rates = { cm: 1, m: 100, km: 100000, inch: 2.54, ft: 30.48, yard: 91.44, g: 1, kg: 1000, lb: 453.592, oz: 28.3495 };
                return ((v * rates[from]) / rates[to]).toFixed(4);
            };
            
            useEffect(() => {
                const defs = { length: ['cm', 'inch'], weight: ['kg', 'lb'], temp: ['Celsius', 'Fahrenheit'] };
                setFrom(defs[category][0]);
                setTo(defs[category][1]);
                setVal('');
            }, [category]);

            const getLabel = (u) => {
                if (category === 'temp' && t.unit.tempLabels && t.unit.tempLabels[u]) {
                    return t.unit.tempLabels[u];
                }
                return u;
            };

            return (
                <div className="space-y-6">
                    <div className="flex p-1 bg-slate-100 rounded-xl">
                        {Object.keys(units).map(c => (
                            <button key={c} onClick={() => setCategory(c)} className={`flex-1 py-2.5 text-sm font-semibold rounded-lg capitalize transition-all ${category === c ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-400'}`}>{t.unit.types[c]}</button>
                        ))}
                    </div>
                    <div className="flex flex-col md:flex-row gap-4 items-center">
                        <div className="flex-1 w-full space-y-2">
                            <label className="text-xs font-bold text-slate-400 uppercase ml-1">{t.unit.input}</label>
                            <div className="flex gap-2">
                                <input type="number" value={val} onChange={e => setVal(e.target.value)} className="w-full p-4 rounded-xl border border-slate-200 focus:border-blue-500 outline-none text-lg font-mono font-bold" placeholder="0" />
                                <select value={from} onChange={e => setFrom(e.target.value)} className="p-4 rounded-xl bg-slate-100 font-bold text-slate-600 outline-none cursor-pointer max-w-[150px]">
                                    {units[category].map(u => <option key={u} value={u}>{getLabel(u)}</option>)}
                                </select>
                            </div>
                        </div>
                        <Icon name="arrow-right" className="text-slate-300 hidden md:block" />
                        <div className="flex-1 w-full space-y-2">
                            <label className="text-xs font-bold text-slate-400 uppercase ml-1">{t.unit.result}</label>
                            <div className="flex gap-2">
                                <div className="w-full p-4 rounded-xl bg-blue-50 border border-blue-100 text-lg font-mono font-bold text-blue-600 flex items-center">{val ? Number(convert()).toLocaleString() : '0'}</div>
                                <select value={to} onChange={e => setTo(e.target.value)} className="p-4 rounded-xl bg-slate-100 font-bold text-slate-600 outline-none cursor-pointer max-w-[150px]">
                                    {units[category].map(u => <option key={u} value={u}>{getLabel(u)}</option>)}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 6. Stopwatch
        const Stopwatch = ({ t }) => {
            const [time, setTime] = useState(0);
            const [run, setRun] = useState(false);
            
            useEffect(() => {
                let animationFrameId;
                let lastTime = Date.now();
                const animate = () => {
                    if (run) {
                        const now = Date.now();
                        const delta = now - lastTime;
                        lastTime = now;
                        setTime(prev => prev + delta);
                        animationFrameId = requestAnimationFrame(animate);
                    }
                };
                if (run) {
                    lastTime = Date.now();
                    animationFrameId = requestAnimationFrame(animate);
                } else {
                    cancelAnimationFrame(animationFrameId);
                }
                return () => cancelAnimationFrame(animationFrameId);
            }, [run]);

            const fmt = (ms) => {
                const m = Math.floor(ms / 60000).toString().padStart(2,'0');
                const s = Math.floor((ms % 60000) / 1000).toString().padStart(2,'0');
                const cs = Math.floor((ms % 1000) / 10).toString().padStart(2,'0');
                return { m, s, cs };
            };
            const { m, s, cs } = fmt(time);

            return (
                <div className="flex flex-col items-center py-6">
                    <div className="text-7xl md:text-9xl font-mono font-bold text-slate-800 tracking-tighter flex items-end leading-none mb-10">
                        <span>{m}</span><span className="text-slate-300 mx-1">:</span><span>{s}</span><span className="text-3xl md:text-5xl text-blue-500 mb-2 md:mb-4 ml-1">.{cs}</span>
                    </div>
                    <div className="flex gap-4">
                        <Button onClick={() => setRun(!run)} variant={run ? "danger" : "primary"} className="w-32 py-4 text-lg">
                            <Icon name={run ? "pause" : "play"} size={24} className="text-white" /> {run ? t.stopwatch.stop : t.stopwatch.start}
                        </Button>
                        <Button onClick={() => { setRun(false); setTime(0); }} variant="secondary" className="w-32 py-4 text-lg">
                            <Icon name="rotate-ccw" size={24} /> {t.stopwatch.reset}
                        </Button>
                    </div>
                </div>
            );
        };

        // 7. Pomodoro (Enhanced with Alarm)
        const Pomodoro = ({ t }) => {
            const [workTime, setWorkTime] = useState(25);
            const [breakTime, setBreakTime] = useState(5);
            
            const [left, setLeft] = useState(workTime * 60);
            const [active, setActive] = useState(false);
            const [isWork, setIsWork] = useState(true);

            // Play Alarm function using Web Audio API
            const playAlarm = () => {
                try {
                    const ctx = new (window.AudioContext || window.webkitAudioContext)();
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();
                    
                    osc.connect(gain);
                    gain.connect(ctx.destination);
                    
                    // Simple "ding" sound
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(880, ctx.currentTime); // High pitch (A5)
                    osc.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 0.5); // Drop to A4
                    
                    gain.gain.setValueAtTime(0.5, ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
                    
                    osc.start();
                    osc.stop(ctx.currentTime + 0.5);
                } catch (e) {
                    console.error("Audio play failed", e);
                }
            };

            // Reset timer when settings change
            useEffect(() => {
                setLeft(isWork ? workTime * 60 : breakTime * 60);
                setActive(false);
            }, [workTime, breakTime]);

            useEffect(() => {
                let interval;
                if(active && left > 0) interval = setInterval(() => setLeft(l => l - 1), 1000);
                else if(left === 0 && active) {
                    // Timer finished
                    setActive(false);
                    playAlarm(); // Play beep
                }
                return () => clearInterval(interval);
            }, [active, left]);

            const toggleMode = () => {
                const next = !isWork;
                setIsWork(next);
                setActive(false);
                setLeft(next ? workTime * 60 : breakTime * 60);
            };

            const reset = () => {
                setActive(false);
                setLeft(isWork ? workTime * 60 : breakTime * 60);
            };

            const format = (s) => `${Math.floor(s/60).toString().padStart(2,'0')}:${(s%60).toString().padStart(2,'0')}`;

            return (
                <div className="flex flex-col items-center py-6">
                    <div className={`px-4 py-1.5 rounded-full text-sm font-bold mb-8 ${isWork ? 'bg-rose-100 text-rose-600' : 'bg-emerald-100 text-emerald-600'}`}>{isWork ? t.pomodoro.statusWork : t.pomodoro.statusBreak}</div>
                    <div className={`text-7xl md:text-9xl font-mono font-bold tracking-tighter mb-10 ${isWork ? 'text-rose-500' : 'text-emerald-500'}`}>{format(left)}</div>
                    
                    <div className="flex gap-4 mb-8">
                        <Button onClick={() => setActive(!active)} className={!isWork ? "bg-emerald-500 hover:bg-emerald-600" : "bg-rose-500 hover:bg-rose-600"}>{active ? t.pomodoro.pause : t.pomodoro.start}</Button>
                        <Button onClick={reset} variant="secondary">{t.pomodoro.reset}</Button>
                    </div>
                    
                    <div className="w-full bg-slate-50 p-4 rounded-xl border border-slate-200">
                        <div className="text-xs font-bold text-slate-400 uppercase mb-3 text-center">{t.pomodoro.setting}</div>
                        <div className="flex gap-4">
                            <div className="flex-1 space-y-1">
                                <label className="text-xs text-slate-500 block text-center">{t.pomodoro.labelWork}</label>
                                <input type="number" value={workTime} onChange={e => setWorkTime(Number(e.target.value))} className="w-full p-2 text-center rounded-lg border border-slate-200 focus:border-blue-500 outline-none" />
                            </div>
                            <div className="flex-1 space-y-1">
                                <label className="text-xs text-slate-500 block text-center">{t.pomodoro.labelBreak}</label>
                                <input type="number" value={breakTime} onChange={e => setBreakTime(Number(e.target.value))} className="w-full p-2 text-center rounded-lg border border-slate-200 focus:border-blue-500 outline-none" />
                            </div>
                        </div>
                    </div>

                    <button onClick={toggleMode} className="mt-6 text-sm text-slate-400 hover:text-slate-600 underline">{isWork ? t.pomodoro.switchBreak : t.pomodoro.switchWork}</button>
                </div>
            );
        };

        // 8. D-Day
        const DDay = ({ t }) => {
            const [date, setDate] = useState('');
            const [res, setRes] = useState(null);

            useEffect(() => {
                if (date) {
                    const today = new Date();
                    today.setHours(0,0,0,0);
                    const target = new Date(date);
                    const diff = Math.ceil((target - today) / (1000 * 60 * 60 * 24));
                    setRes(diff);
                }
            }, [date]);

            return (
                <div className="grid md:grid-cols-2 gap-6 items-center">
                    <div className="space-y-4">
                        <InputGroup label={t.dday.label}>
                            <input type="date" value={date} onChange={e => setDate(e.target.value)} className="w-full p-4 rounded-xl border border-slate-200 focus:border-blue-500 outline-none" />
                        </InputGroup>
                        <p className="text-sm text-slate-400">{t.dday.guide}</p>
                    </div>
                    <div className="bg-gradient-to-br from-blue-500 to-indigo-600 text-white p-8 rounded-2xl flex flex-col items-center justify-center text-center shadow-lg h-48">
                        {res !== null ? (
                            <>
                                <div className="text-5xl font-bold mb-2">{res === 0 ? "D-Day" : res > 0 ? `D-${res}` : `D+${Math.abs(res)}`}</div>
                                <div className="text-blue-100 font-medium">{res === 0 ? t.dday.isToday : res > 0 ? t.dday.daysLeft : t.dday.daysPast}</div>
                            </>
                        ) : <div className="text-blue-200">Select Date</div>}
                    </div>
                </div>
            );
        };

        // 9. Password Generator
        const PasswordGenerator = ({ t }) => {
            const [len, setLen] = useState(12);
            const [opt, setOpt] = useState({ num: true, sym: true });
            const [pw, setPw] = useState('');
            const [copied, setCopied] = useState(false);

            const gen = () => {
                let c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
                if(opt.num) c += "0123456789";
                if(opt.sym) c += "!@#$%^&*()_+";
                let res = "";
                for(let i=0; i<len; i++) res += c[Math.floor(Math.random()*c.length)];
                setPw(res);
                setCopied(false);
            };
            
            useEffect(gen, []);
            const copy = () => { navigator.clipboard.writeText(pw); setCopied(true); setTimeout(() => setCopied(false), 2000); };

            return (
                <div className="space-y-6">
                    <div onClick={copy} className="group relative bg-slate-800 hover:bg-slate-700 cursor-pointer rounded-2xl p-6 text-center transition-all shadow-lg active:scale-[0.99]">
                        <div className="font-mono text-2xl md:text-3xl text-white break-all">{pw}</div>
                        <div className="absolute top-4 right-4 text-slate-400 opacity-0 group-hover:opacity-100"><Icon name={copied ? "check" : "copy"} size={20} className={copied ? "text-green-400" : ""} /></div>
                    </div>
                    <div className="bg-slate-50 p-6 rounded-2xl space-y-6">
                        <InputGroup label={`${t.password.length}: ${len}`}>
                            <input type="range" min="6" max="32" value={len} onChange={e => setLen(e.target.value)} className="w-full accent-blue-600" />
                        </InputGroup>
                        <div className="flex gap-4">
                            {['num', 'sym'].map(k => (
                                <label key={k} className="flex-1 flex items-center justify-center gap-2 p-3 rounded-xl bg-white border border-slate-200 cursor-pointer hover:border-blue-300 select-none">
                                    <input type="checkbox" checked={opt[k]} onChange={() => setOpt({...opt, [k]: !opt[k]})} className="accent-blue-600" />
                                    <span className="text-sm font-medium text-slate-600">{k === 'num' ? t.password.numbers : t.password.symbols}</span>
                                </label>
                            ))}
                        </div>
                        <Button onClick={gen} className="w-full py-4"><Icon name="refresh-cw" size={18} className="mr-2 text-white" /> {t.password.generate}</Button>
                    </div>
                </div>
            );
        };

        // 10. Lotto
        const Lotto = ({ t }) => {
            const [nums, setNums] = useState([]);
            const gen = () => {
                const s = new Set();
                while(s.size < 6) s.add(Math.floor(Math.random()*45)+1);
                setNums([...s].sort((a,b)=>a-b));
            };
            const colors = (n) => {
                if(n<=10) return ['#facc15', '#ca8a04'];
                if(n<=20) return ['#60a5fa', '#2563eb'];
                if(n<=30) return ['#f87171', '#dc2626'];
                if(n<=40) return ['#94a3b8', '#475569'];
                return ['#4ade80', '#16a34a'];
            };

            return (
                <div className="flex flex-col items-center py-8">
                    <div className="flex flex-wrap justify-center gap-3 mb-12 min-h-[64px]">
                        {nums.length > 0 ? nums.map(n => (
                            <div key={n} className="w-14 h-14 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg animate-bounce-short"
                                style={{background: `linear-gradient(135deg, ${colors(n)[0]}, ${colors(n)[1]})`}}>{n}</div>
                        )) : <div className="text-slate-300 font-bold text-xl flex items-center h-14">{t.lotto.guide}</div>}
                    </div>
                    <Button onClick={gen} className="bg-emerald-500 hover:bg-emerald-600 shadow-emerald-200 px-10 py-4 rounded-full text-lg">
                        <Icon name="clover" className="mr-2 text-white" /> {t.lotto.btn}
                    </Button>
                </div>
            );
        };

        // --- Main App & Routing ---
        const App = () => {
            const [hash, setHash] = useState(window.location.hash.slice(1) || 'text');
            const [lang, setLang] = useState('ko');
            const [menuOpen, setMenuOpen] = useState(false);
            const [isIconReady, setIsIconReady] = useState(false); // ÏïÑÏù¥ÏΩò Î°úÎî© ÏÉÅÌÉú
            const t = translations[lang];
            const currentYear = 2026;

            useEffect(() => {
                const handleHash = () => {
                    const h = window.location.hash.slice(1);
                    setHash(h || 'text');
                    window.scrollTo(0,0);
                    setMenuOpen(false);
                };
                window.addEventListener('hashchange', handleHash);
                
                // Lucide Î°úÎî© ÌôïÏù∏ Ìè¥ÎßÅ (ÏïàÏ†ïÏÑ± ÌôïÎ≥¥)
                const checkLucide = setInterval(() => {
                    if (window.lucide && window.lucide.createIcons) {
                        setIsIconReady(true);
                        clearInterval(checkLucide);
                    }
                }, 100);

                return () => {
                    window.removeEventListener('hashchange', handleHash);
                    clearInterval(checkLucide);
                };
            }, []);

            useEffect(() => {
                document.documentElement.lang = lang;
            }, [lang]);

            const tools = [
                { id: 'text', icon: 'type', cat: 'text', comp: WordCounter },
                { id: 'percent', icon: 'calculator', cat: 'math', comp: PercentCalculator },
                { id: 'discount', icon: 'percent', cat: 'math', comp: DiscountCalculator },
                { id: 'unit', icon: 'arrow-left-right', cat: 'math', comp: UnitConverter },
                { id: 'image', icon: 'image-plus', cat: 'media', comp: ImageTools },
                { id: 'stopwatch', icon: 'timer', cat: 'time', comp: Stopwatch },
                { id: 'pomodoro', icon: 'clock', cat: 'time', comp: Pomodoro },
                { id: 'dday', icon: 'calendar', cat: 'time', comp: DDay },
                { id: 'password', icon: 'lock', cat: 'security', comp: PasswordGenerator },
                { id: 'lotto', icon: 'clover', cat: 'fun', comp: Lotto },
            ];

            const activeTool = tools.find(x => x.id === hash) || tools[0];
            const ActiveComponent = activeTool.comp;
            const seo = t.seo[activeTool.id] || { title: activeTool.id, desc: "Tool description", tags: [] };

            return (
                <div className="flex h-screen bg-slate-50">
                    {/* Sidebar */}
                    <aside className={`fixed inset-y-0 left-0 z-40 w-72 bg-white border-r border-slate-200 transform transition-transform duration-300 md:static md:translate-x-0 ${menuOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col`}>
                        <div className="p-6">
                            <h1 className="text-2xl font-bold flex items-center gap-3 text-slate-800">
                                <div className="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200">
                                    <Icon name="box" size={24} />
                                </div>
                                UtilityBox
                            </h1>
                            <p className="text-xs text-slate-400 mt-2 ml-1">Ïä§ÎßàÌä∏ Ìà¥ Î™®Ïùå</p>
                        </div>
                        <nav className="flex-1 px-4 py-2 space-y-8 overflow-y-auto custom-scrollbar">
                            {['text', 'math', 'media', 'time', 'security', 'fun'].map(cat => (
                                <div key={cat}>
                                    <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-3">{t.categories[cat]}</h3>
                                    <div className="space-y-1">
                                        {tools.filter(x => x.cat === cat).map(item => (
                                            <a key={item.id} href={`#${item.id}`}
                                                className={`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all ${hash === item.id ? 'bg-slate-800 text-white shadow-md' : 'text-slate-600 hover:bg-slate-100'}`}>
                                                <Icon name={item.icon} size={18} className={hash === item.id ? 'text-blue-300' : 'text-slate-400'} />
                                                {t.tools[item.id]}
                                            </a>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </nav>
                        
                        {/* Language Toggle in Sidebar */}
                        <div className="p-4 border-t border-slate-100">
                            <button onClick={() => setLang(l => l === 'ko' ? 'en' : 'ko')} 
                                className="w-full flex items-center justify-center gap-2 py-2.5 rounded-xl border border-slate-200 text-sm font-bold text-slate-500 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                                <Icon name="globe" size={16} />
                                {lang === 'ko' ? 'Language: ÌïúÍµ≠Ïñ¥' : 'Language: English'}
                            </button>
                        </div>
                    </aside>

                    {/* Overlay */}
                    {menuOpen && <div className="fixed inset-0 bg-black/20 z-30 md:hidden backdrop-blur-sm" onClick={() => setMenuOpen(false)}></div>}

                    {/* Main */}
                    <main className="flex-1 flex flex-col h-full relative overflow-hidden">
                        <header className="md:hidden bg-white/80 backdrop-blur-md border-b border-slate-200 p-4 flex justify-between items-center sticky top-0 z-20">
                            <span className="font-bold text-lg flex items-center gap-2"><Icon name="box" size={20} className="text-blue-600"/> {t.title}</span>
                            <div className="flex gap-2">
                                <button onClick={() => setLang(l => l === 'ko' ? 'en' : 'ko')} className="p-2 bg-slate-100 rounded-lg text-slate-600"><Icon name="globe" size={20} /></button>
                                <button onClick={() => setMenuOpen(true)} className="p-2 bg-slate-100 rounded-lg text-slate-600"><Icon name="menu" size={20} /></button>
                            </div>
                        </header>

                        <div className="flex-1 overflow-y-auto p-4 md:p-8">
                            <div className="max-w-2xl mx-auto pb-20">
                                {/* Ad Space */}
                                <div className="mb-6 bg-slate-100 border-2 border-dashed border-slate-200 rounded-lg h-20 flex flex-col items-center justify-center text-slate-400 text-xs">
                                    <span className="font-bold">Google AdSense</span>
                                    <span>Display Ad (Responsive)</span>
                                </div>

                                <div className="mb-6 animate-fade-in">
                                    <div className="flex items-center gap-2 mb-2">
                                        <span className="text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-md uppercase tracking-wider">{t.categories[activeTool.cat]}</span>
                                    </div>
                                    <h2 className="text-3xl font-bold text-slate-900">{t.tools[activeTool.id]}</h2>
                                </div>

                                <Card className="min-h-[300px] mb-8">
                                    <ActiveComponent t={t} />
                                </Card>

                                {/* SEO Content */}
                                <div className="bg-white border-l-4 border-blue-500 p-6 rounded-r-xl shadow-sm prose prose-slate max-w-none prose-sm">
                                    <h3 className="text-lg font-bold text-slate-800 mb-2 flex items-center gap-2">
                                        <Icon name="lightbulb" size={18} className="text-blue-500" />
                                        ÌôúÏö© ÍøÄÌåÅ
                                    </h3>
                                    <h4 className="font-bold text-slate-700 m-0">{seo.title}</h4>
                                    <p className="text-slate-600 mt-1">{seo.desc}</p>
                                    <div className="flex flex-wrap gap-2 mt-3 not-prose">
                                        {seo.tags && seo.tags.map(tag => (
                                            <span key={tag} className="text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded-full">
                                                {tag}
                                            </span>
                                        ))}
                                    </div>
                                </div>
                                
                                <footer className="mt-12 text-center text-xs text-slate-400">
                                    &copy; {currentYear} Utility Box. All tools run locally in your browser.
                                </footer>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
