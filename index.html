<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Utility Box - Premium Tools</title>
    <!-- ÌååÎπÑÏΩò -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì¶</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans KR', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8' },
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px rgba(59, 130, 246, 0.5)',
                    }
                }
            }
        }
    </script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body { 
            font-family: 'Inter', 'Noto Sans KR', sans-serif; 
            background-color: #f8fafc;
            -webkit-font-smoothing: antialiased;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .gradient-text {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 3D Ball Effect */
        .lotto-ball {
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), transparent 20%),
                        linear-gradient(135deg, var(--bg-color-from), var(--bg-color-to));
            box-shadow: 0 4px 6px rgba(0,0,0,0.1), inset 0 -4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="text-slate-800 h-screen overflow-hidden selection:bg-blue-100 selection:text-blue-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // --- Translations (Ïú†ÏßÄ) ---
        const translations = {
            ko: {
                title: "Utility Box",
                subtitle: "Ïä§ÎßàÌä∏ Ìà¥ Î™®Ïùå",
                categories: { text: "ÌÖçÏä§Ìä∏", calc: "Í≥ÑÏÇ∞", time: "ÏãúÍ∞Ñ Í¥ÄÎ¶¨", security: "Î≥¥Ïïà", fun: "Ïû¨ÎØ∏" },
                tools: {
                    text: "Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞",
                    discount: "Ìï†Ïù∏ Í≥ÑÏÇ∞Í∏∞",
                    unit: "Îã®ÏúÑ Î≥ÄÌôò",
                    stopwatch: "Ïä§ÌÜ±ÏõåÏπò",
                    pomodoro: "Ìè¨Î™®ÎèÑÎ°ú",
                    password: "ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±",
                    dday: "D-Day",
                    lotto: "Î°úÎòê Î≤àÌò∏"
                },
                wordCounter: {
                    title: "Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞",
                    placeholder: "ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...",
                    withSpace: "Í≥µÎ∞± Ìè¨Ìï®",
                    noSpace: "Í≥µÎ∞± Ï†úÏô∏",
                    words: "Îã®Ïñ¥",
                    lines: "Ï§Ñ",
                },
                discount: {
                    title: "Ìï†Ïù∏Ïú® Í≥ÑÏÇ∞Í∏∞",
                    price: "ÏõêÎûò Í∞ÄÍ≤©",
                    rate: "Ìï†Ïù∏Ïú® (%)",
                    saved: "Ìï†Ïù∏ Í∏àÏï°",
                    final: "ÏµúÏ¢Ö Í∞ÄÍ≤©"
                },
                unit: {
                    title: "Îã®ÏúÑ Î≥ÄÌôòÍ∏∞",
                    input: "ÏûÖÎ†•Í∞í",
                    result: "Î≥ÄÌôòÍ∞í",
                    types: { length: "Í∏∏Ïù¥", weight: "Î¨¥Í≤å", temp: "Ïò®ÎèÑ" },
                },
                stopwatch: {
                    title: "Ïä§ÌÜ±ÏõåÏπò",
                    start: "ÏãúÏûë",
                    stop: "Ï†ïÏßÄ",
                    reset: "Ï¥àÍ∏∞Ìôî"
                },
                pomodoro: {
                    title: "Ìè¨Î™®ÎèÑÎ°ú ÌÉÄÏù¥Î®∏",
                    statusWork: "üî• ÏßëÏ§ë ÏãúÍ∞Ñ",
                    statusBreak: "‚òï Ìú¥Ïãù ÏãúÍ∞Ñ",
                    start: "ÌÉÄÏù¥Î®∏ ÏãúÏûë",
                    pause: "ÏùºÏãú Ï†ïÏßÄ",
                    reset: "Î¶¨ÏÖã",
                    switchWork: "ÏßëÏ§ë Î™®Îìú",
                    switchBreak: "Ìú¥Ïãù Î™®Îìú"
                },
                password: {
                    title: "ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±",
                    length: "Í∏∏Ïù¥",
                    numbers: "Ïà´Ïûê (0-9)",
                    symbols: "ÌäπÏàòÎ¨∏Ïûê (!@#)",
                    generate: "ÏÉàÎ°ú ÏÉùÏÑ±",
                    copied: "Î≥µÏÇ¨ ÏôÑÎ£å!"
                },
                dday: {
                    title: "D-Day Í≥ÑÏÇ∞",
                    label: "ÎÇ†Ïßú ÏÑ†ÌÉù",
                    guide: "Í∏∞ÎÖêÏùºÏù¥ÎÇò Î™©ÌëúÏùºÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî",
                    isToday: "üéâ Ïò§ÎäòÏûÖÎãàÎã§!",
                    daysLeft: "Ïùº ÎÇ®Ïùå",
                    daysPast: "Ïùº ÏßÄÎÇ®"
                },
                lotto: {
                    title: "Î°úÎòê ÏÉùÏÑ±Í∏∞",
                    btn: "Î≤àÌò∏ Ï∂îÏ≤®ÌïòÍ∏∞",
                    guide: "ÌñâÏö¥Ïùò Î≤àÌò∏Î•º ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî"
                },
                tip: {
                    title: "üí° Privacy Note",
                    desc: "Î™®Îì† Í∏∞Îä•ÏùÄ Î∏åÎùºÏö∞Ï†Ä ÎÇ¥ÏóêÏÑúÎßå ÏûëÎèôÌïòÎ©∞ ÏÑúÎ≤ÑÎ°ú Ï†ÑÏÜ°ÎêòÏßÄ ÏïäÏäµÎãàÎã§."
                }
            },
            en: {
                title: "Utility Box",
                subtitle: "Smart Tools",
                categories: { text: "Text", calc: "Calc", time: "Time", security: "Security", fun: "Fun" },
                tools: {
                    text: "Word Counter",
                    discount: "Discount",
                    unit: "Converter",
                    stopwatch: "Stopwatch",
                    pomodoro: "Pomodoro",
                    password: "Password",
                    dday: "D-Day",
                    lotto: "Lotto"
                },
                wordCounter: {
                    title: "Word Counter",
                    placeholder: "Type here...",
                    withSpace: "Chars (Space)",
                    noSpace: "Chars (No Space)",
                    words: "Words",
                    lines: "Lines",
                },
                discount: {
                    title: "Discount Calc",
                    price: "Original",
                    rate: "Discount (%)",
                    saved: "Saved",
                    final: "Final Price"
                },
                unit: {
                    title: "Unit Converter",
                    input: "Input",
                    result: "Result",
                    types: { length: "Length", weight: "Weight", temp: "Temp" },
                },
                stopwatch: {
                    title: "Stopwatch",
                    start: "Start",
                    stop: "Stop",
                    reset: "Reset"
                },
                pomodoro: {
                    title: "Pomodoro",
                    statusWork: "üî• Focus Time",
                    statusBreak: "‚òï Break Time",
                    start: "Start",
                    pause: "Pause",
                    reset: "Reset",
                    switchWork: "Focus Mode",
                    switchBreak: "Break Mode"
                },
                password: {
                    title: "Password Gen",
                    length: "Length",
                    numbers: "Numbers",
                    symbols: "Symbols",
                    generate: "Generate",
                    copied: "Copied!"
                },
                dday: {
                    title: "D-Day Calc",
                    label: "Target Date",
                    guide: "Select your target date",
                    isToday: "üéâ It's Today!",
                    daysLeft: "days left",
                    daysPast: "days past"
                },
                lotto: {
                    title: "Lotto Gen",
                    btn: "Draw Numbers",
                    guide: "Check your lucky numbers"
                },
                tip: {
                    title: "üí° Privacy Note",
                    desc: "All tools run locally. No data is sent to servers."
                }
            }
        };

        // --- Helper Components ---
        
        // Icon Ïª¥Ìè¨ÎÑåÌä∏ ÏµúÏ†ÅÌôî: React.memoÏôÄ useEffect ÏùòÏ°¥ÏÑ± Î∞∞Ïó¥ Ï∂îÍ∞Ä
        // Ïù¥Î•º ÌÜµÌï¥ Ïä§ÌÜ±ÏõåÏπòÍ∞ôÏù¥ Ïû¶ÏùÄ Î¶¨Î†åÎçîÎßÅÏù¥ Î∞úÏÉùÌïòÎäî Í≥≥ÏóêÏÑúÎèÑ DOM Ïä§Ï∫îÏùÑ ÏµúÏÜåÌôîÌï©ÎãàÎã§.
        const Icon = React.memo(({ name, size = 20, className = "" }) => {
            const iconRef = useRef(null);
            
            useEffect(() => {
                if (window.lucide) {
                    // createIconsÍ∞Ä Î¨∏ÏÑú Ï†ÑÏ≤¥Í∞Ä ÏïÑÎãå Ìï¥Îãπ ÏöîÏÜåÎßå ÌÉÄÍ≤üÌåÖÌïòÎèÑÎ°ù Ïú†ÎèÑÌï† ÏàòÎäî ÏóÜÏúºÎÇò
                    // ÏµúÏÜåÌïú name, size, classNameÏù¥ Î∞îÎÄî ÎïåÎßå Ïã§ÌñâÎêòÎèÑÎ°ù Ï†úÌïúÌï©ÎãàÎã§.
                    window.lucide.createIcons({
                        nameAttr: 'data-lucide',
                        attrs: { class: className, width: size, height: size }
                    });
                }
            }, [name, size, className]); // ÏùòÏ°¥ÏÑ± Î∞∞Ïó¥ Ï∂îÍ∞ÄÎ°ú Î∂àÌïÑÏöîÌïú Ïã§Ìñâ Î∞©ÏßÄ

            return <i data-lucide={name} width={size} height={size} className={className} ref={iconRef}></i>;
        });

        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-3xl shadow-soft p-6 border border-slate-100 animate-fade-in ${className}`}>
                {children}
            </div>
        );

        const Button = ({ children, onClick, variant = "primary", className = "", ...props }) => {
            const baseStyle = "px-6 py-3 rounded-xl font-semibold transition-all duration-200 active:scale-95 flex items-center justify-center gap-2 shadow-sm";
            const variants = {
                primary: "bg-blue-600 hover:bg-blue-700 text-white shadow-blue-200",
                secondary: "bg-slate-100 hover:bg-slate-200 text-slate-700",
                danger: "bg-rose-500 hover:bg-rose-600 text-white shadow-rose-200",
                success: "bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-200",
                outline: "border-2 border-slate-200 text-slate-600 hover:border-blue-500 hover:text-blue-600 bg-transparent"
            };
            return (
                <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`} {...props}>
                    {children}
                </button>
            );
        };

        const InputGroup = ({ label, children }) => (
            <div className="space-y-2">
                <label className="text-xs font-bold text-slate-400 uppercase tracking-wider ml-1">{label}</label>
                {children}
            </div>
        );

        // --- Tools ---

        const WordCounter = ({ lang, t }) => {
            const [text, setText] = useState('');
            const stats = {
                charWithSpace: text.length,
                charNoSpace: text.replace(/\s/g, '').length,
                words: text.trim() === '' ? 0 : text.trim().split(/\s+/).length,
                lines: text === '' ? 0 : text.split(/\n/).length
            };

            const StatBox = ({ label, value, color }) => (
                <div className={`p-4 rounded-2xl bg-${color}-50 border border-${color}-100 flex flex-col items-center justify-center transition-transform hover:scale-105`}>
                    <span className={`text-${color}-600 font-bold text-2xl`}>{value.toLocaleString()}</span>
                    <span className={`text-${color}-400 text-xs font-medium mt-1`}>{label}</span>
                </div>
            );

            return (
                <div className="space-y-6">
                    <textarea
                        className="w-full h-64 p-6 rounded-3xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-blue-500 outline-none resize-none text-lg leading-relaxed shadow-inner transition-all placeholder:text-slate-300"
                        placeholder={t.wordCounter.placeholder}
                        value={text}
                        onChange={(e) => setText(e.target.value)}
                    ></textarea>
                    
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <StatBox label={t.wordCounter.withSpace} value={stats.charWithSpace} color="blue" />
                        <StatBox label={t.wordCounter.noSpace} value={stats.charNoSpace} color="indigo" />
                        <StatBox label={t.wordCounter.words} value={stats.words} color="emerald" />
                        <StatBox label={t.wordCounter.lines} value={stats.lines} color="amber" />
                    </div>
                </div>
            );
        };

        const DiscountCalculator = ({ t }) => {
            const [price, setPrice] = useState('');
            const [discount, setDiscount] = useState('');
            const final = price && discount ? price - (price * (discount / 100)) : 0;
            const saved = price && discount ? price * (discount / 100) : 0;

            return (
                <div className="grid md:grid-cols-2 gap-8 items-start">
                    <div className="space-y-6">
                        <InputGroup label={t.discount.price}>
                            <div className="relative">
                                <span className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">‚Ç©</span>
                                <input type="number" value={price} onChange={e => setPrice(Number(e.target.value))}
                                    className="w-full pl-10 pr-4 py-4 rounded-xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-pink-500 outline-none text-xl font-bold text-slate-700 transition-all" placeholder="0" />
                            </div>
                        </InputGroup>

                        <InputGroup label={t.discount.rate}>
                            <div className="space-y-3">
                                <div className="flex gap-2">
                                    {[10, 20, 30, 50].map(p => (
                                        <button key={p} onClick={() => setDiscount(p)}
                                            className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${discount === p ? 'bg-pink-500 text-white shadow-md' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`}>
                                            {p}%
                                        </button>
                                    ))}
                                </div>
                                <div className="relative">
                                    <input type="number" value={discount} onChange={e => setDiscount(Number(e.target.value))}
                                        className="w-full pl-4 pr-10 py-4 rounded-xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-pink-500 outline-none text-xl font-bold text-slate-700 transition-all" placeholder="0" />
                                    <span className="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400">%</span>
                                </div>
                            </div>
                        </InputGroup>
                    </div>

                    <div className="bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-3xl text-white shadow-xl relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-32 h-32 bg-pink-500 rounded-full blur-[60px] opacity-20"></div>
                        <div className="space-y-6 relative z-10">
                            <div className="flex justify-between items-center text-slate-400">
                                <span>{t.discount.saved}</span>
                                <span className="font-mono text-lg text-pink-400">-{saved.toLocaleString()}</span>
                            </div>
                            <div className="h-px bg-slate-700"></div>
                            <div>
                                <div className="text-slate-400 text-sm mb-1">{t.discount.final}</div>
                                <div className="text-4xl font-bold font-mono tracking-tight text-white">{final.toLocaleString()}</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const UnitConverter = ({ t }) => {
            const [category, setCategory] = useState('length');
            const [val, setVal] = useState('');
            const [from, setFrom] = useState('cm');
            const [to, setTo] = useState('inch');

            // Simplified conversion logic for brevity
            const units = {
                length: ['cm', 'm', 'km', 'inch', 'ft', 'yard'],
                weight: ['kg', 'g', 'lb', 'oz'],
                temp: ['Celsius', 'Fahrenheit', 'Kelvin']
            };
            
            // Re-using logic from original but simplified structure
            const convert = () => {
                if(!val) return '';
                const v = parseFloat(val);
                if(category === 'temp') {
                     if (from === to) return v;
                     let c = from === 'Celsius' ? v : from === 'Fahrenheit' ? (v - 32) * 5/9 : v - 273.15;
                     let r = to === 'Celsius' ? c : to === 'Fahrenheit' ? (c * 9/5) + 32 : c + 273.15;
                     return r.toFixed(2);
                }
                const rates = {
                    cm: 1, m: 100, km: 100000, inch: 2.54, ft: 30.48, yard: 91.44,
                    g: 1, kg: 1000, lb: 453.592, oz: 28.3495
                };
                return ((v * rates[from]) / rates[to]).toFixed(4);
            };
            
            useEffect(() => {
                const defs = { length: ['cm', 'inch'], weight: ['kg', 'lb'], temp: ['Celsius', 'Fahrenheit'] };
                setFrom(defs[category][0]);
                setTo(defs[category][1]);
                setVal('');
            }, [category]);

            return (
                <div className="space-y-8">
                    <div className="flex p-1 bg-slate-100 rounded-xl">
                        {Object.keys(units).map(c => (
                            <button key={c} onClick={() => setCategory(c)}
                                className={`flex-1 py-2.5 text-sm font-semibold rounded-lg capitalize transition-all ${category === c ? 'bg-white text-orange-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}>
                                {t.unit.types[c]}
                            </button>
                        ))}
                    </div>

                    <div className="flex flex-col md:flex-row gap-4 items-center">
                        <div className="flex-1 w-full space-y-2">
                            <label className="text-xs font-bold text-slate-400 uppercase ml-1">{t.unit.input}</label>
                            <div className="flex gap-2">
                                <input type="number" value={val} onChange={e => setVal(e.target.value)} className="w-full p-4 rounded-xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-orange-500 outline-none text-lg font-mono font-bold" placeholder="0" />
                                <select value={from} onChange={e => setFrom(e.target.value)} className="p-4 rounded-xl bg-slate-100 font-bold text-slate-600 outline-none cursor-pointer hover:bg-slate-200">
                                    {units[category].map(u => <option key={u} value={u}>{u}</option>)}
                                </select>
                            </div>
                        </div>

                        <div className="p-2 bg-slate-100 rounded-full text-slate-400 rotate-90 md:rotate-0">
                            <Icon name="arrow-right" />
                        </div>

                        <div className="flex-1 w-full space-y-2">
                            <label className="text-xs font-bold text-slate-400 uppercase ml-1">{t.unit.result}</label>
                            <div className="flex gap-2">
                                <div className="w-full p-4 rounded-xl bg-orange-50 border-2 border-orange-100 text-lg font-mono font-bold text-orange-600 flex items-center">
                                    {val ? Number(convert()).toLocaleString() : '0'}
                                </div>
                                <select value={to} onChange={e => setTo(e.target.value)} className="p-4 rounded-xl bg-slate-100 font-bold text-slate-600 outline-none cursor-pointer hover:bg-slate-200">
                                    {units[category].map(u => <option key={u} value={u}>{u}</option>)}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Stopwatch = ({ t }) => {
            const [time, setTime] = useState(0);
            const [run, setRun] = useState(false);
            
            // ÏÑ±Îä• Î∞è Ï†ïÌôïÎèÑ Í∞úÏÑ†: requestAnimationFrame Î∞è Date.now() ÏÇ¨Ïö©
            useEffect(() => {
                let animationFrameId;
                let lastTime = Date.now();
                
                const animate = () => {
                    if (run) {
                        const now = Date.now();
                        const delta = now - lastTime;
                        lastTime = now;
                        setTime(prev => prev + delta);
                        animationFrameId = requestAnimationFrame(animate);
                    }
                };

                if (run) {
                    lastTime = Date.now();
                    animationFrameId = requestAnimationFrame(animate);
                } else {
                    cancelAnimationFrame(animationFrameId);
                }

                return () => cancelAnimationFrame(animationFrameId);
            }, [run]);

            const fmt = (ms) => {
                const m = Math.floor(ms / 60000).toString().padStart(2,'0');
                const s = Math.floor((ms % 60000) / 1000).toString().padStart(2,'0');
                const cs = Math.floor((ms % 1000) / 10).toString().padStart(2,'0');
                return { m, s, cs };
            };
            const { m, s, cs } = fmt(time);

            return (
                <div className="flex flex-col items-center py-10">
                    <div className="relative mb-12">
                        <div className="absolute inset-0 bg-red-500 blur-[40px] opacity-10 rounded-full"></div>
                        <div className="text-7xl md:text-9xl font-mono font-bold text-slate-800 tracking-tighter flex items-end leading-none relative z-10">
                            <span>{m}</span><span className="text-slate-300 mx-1">:</span>
                            <span>{s}</span><span className="text-3xl md:text-5xl text-red-500 mb-2 md:mb-4 ml-1">.{cs}</span>
                        </div>
                    </div>
                    <div className="flex gap-6">
                        <button onClick={() => setRun(!run)} 
                            className={`w-20 h-20 rounded-full flex items-center justify-center shadow-lg transition-transform active:scale-90 ${run ? 'bg-red-500 text-white shadow-red-200' : 'bg-blue-600 text-white shadow-blue-200'}`}>
                            <Icon name={run ? "pause" : "play"} size={32} className="text-white" />
                        </button>
                        <button onClick={() => { setRun(false); setTime(0); }} 
                            className="w-20 h-20 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center hover:bg-slate-200 transition-colors active:scale-95">
                            <Icon name="rotate-ccw" size={28} />
                        </button>
                    </div>
                </div>
            );
        };

        const Pomodoro = ({ t }) => {
            const [left, setLeft] = useState(25 * 60);
            const [active, setActive] = useState(false);
            const [isWork, setIsWork] = useState(true);

            useEffect(() => {
                let interval;
                if(active && left > 0) interval = setInterval(() => setLeft(l => l - 1), 1000);
                else if(left === 0) setActive(false);
                return () => clearInterval(interval);
            }, [active, left]);

            const toggleMode = () => {
                const next = !isWork;
                setIsWork(next);
                setActive(false);
                setLeft(next ? 25*60 : 5*60);
            };

            const format = (s) => `${Math.floor(s/60).toString().padStart(2,'0')}:${(s%60).toString().padStart(2,'0')}`;

            return (
                <div className="flex flex-col items-center py-6">
                    <div className={`px-4 py-1.5 rounded-full text-sm font-bold mb-8 transition-colors ${isWork ? 'bg-orange-100 text-orange-600' : 'bg-teal-100 text-teal-600'}`}>
                        {isWork ? t.pomodoro.statusWork : t.pomodoro.statusBreak}
                    </div>

                    <div className="relative w-64 h-64 md:w-80 md:h-80 rounded-full border-8 border-slate-100 flex items-center justify-center mb-10 shadow-inner bg-white">
                         {/* SVG Circle Progress could go here */}
                        <div className={`text-6xl md:text-7xl font-mono font-bold tracking-tighter ${isWork ? 'text-orange-500' : 'text-teal-500'}`}>
                            {format(left)}
                        </div>
                    </div>

                    <div className="flex gap-4">
                        <Button onClick={() => setActive(!active)} variant={isWork ? "primary" : "success"} className={!isWork ? "bg-teal-500 hover:bg-teal-600" : "bg-orange-500 hover:bg-orange-600"}>
                            {active ? t.pomodoro.pause : t.pomodoro.start}
                        </Button>
                        <Button onClick={() => { setActive(false); setLeft(isWork ? 25*60 : 5*60); }} variant="secondary">
                            {t.pomodoro.reset}
                        </Button>
                    </div>
                    
                    <button onClick={toggleMode} className="mt-8 text-sm text-slate-400 hover:text-slate-600 underline decoration-slate-300 underline-offset-4">
                        {isWork ? t.pomodoro.switchBreak : t.pomodoro.switchWork}
                    </button>
                </div>
            );
        };

        const PasswordGenerator = ({ t }) => {
            const [len, setLen] = useState(12);
            const [opt, setOpt] = useState({ num: true, sym: true });
            const [pw, setPw] = useState('');
            const [copied, setCopied] = useState(false);

            const gen = () => {
                let c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
                if(opt.num) c += "0123456789";
                if(opt.sym) c += "!@#$%^&*()_+";
                let res = "";
                for(let i=0; i<len; i++) res += c[Math.floor(Math.random()*c.length)];
                setPw(res);
                setCopied(false);
            };
            
            useEffect(gen, []);

            const copy = () => {
                navigator.clipboard.writeText(pw);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            return (
                <div className="space-y-8">
                    <div onClick={copy} className="group relative bg-slate-800 hover:bg-slate-700 cursor-pointer rounded-2xl p-8 text-center transition-all shadow-lg active:scale-[0.99]">
                        <div className="font-mono text-3xl md:text-4xl text-white break-all tracking-wider">{pw}</div>
                        <div className="absolute top-4 right-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity">
                            <Icon name={copied ? "check" : "copy"} size={20} className={copied ? "text-green-400" : ""} />
                        </div>
                        {copied && <div className="absolute bottom-2 left-1/2 -translate-x-1/2 text-xs text-green-400 font-bold">{t.password.copied}</div>}
                    </div>

                    <div className="space-y-6 bg-slate-50 p-6 rounded-2xl">
                        <InputGroup label={`${t.password.length}: ${len}`}>
                            <input type="range" min="6" max="32" value={len} onChange={e => setLen(e.target.value)}
                                className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600" />
                        </InputGroup>
                        
                        <div className="flex gap-4">
                            {['num', 'sym'].map(k => (
                                <label key={k} className="flex-1 flex items-center justify-center gap-3 p-3 rounded-xl bg-white border border-slate-200 cursor-pointer hover:border-indigo-300 transition-colors select-none">
                                    <input type="checkbox" checked={opt[k]} onChange={() => setOpt({...opt, [k]: !opt[k]})} className="w-5 h-5 accent-indigo-600 rounded" />
                                    <span className="text-sm font-medium text-slate-600">{k === 'num' ? t.password.numbers : t.password.symbols}</span>
                                </label>
                            ))}
                        </div>
                        
                        <Button onClick={gen} className="w-full bg-indigo-600 hover:bg-indigo-700 text-white shadow-indigo-200">
                            <Icon name="refresh-cw" size={18} /> {t.password.generate}
                        </Button>
                    </div>
                </div>
            );
        };

        const Lotto = ({ t }) => {
            const [nums, setNums] = useState([]);
            const gen = () => {
                const s = new Set();
                while(s.size < 6) s.add(Math.floor(Math.random()*45)+1);
                setNums([...s].sort((a,b)=>a-b));
            };

            const colors = (n) => {
                if(n<=10) return ['#facc15', '#ca8a04']; // Yellow
                if(n<=20) return ['#60a5fa', '#2563eb']; // Blue
                if(n<=30) return ['#f87171', '#dc2626']; // Red
                if(n<=40) return ['#94a3b8', '#475569']; // Gray
                return ['#4ade80', '#16a34a']; // Green
            };

            return (
                <div className="flex flex-col items-center py-8">
                    <div className="flex flex-wrap justify-center gap-4 mb-12 min-h-[80px]">
                        {nums.length > 0 ? nums.map(n => (
                            <div key={n} className="lotto-ball w-14 h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center text-white font-bold text-xl md:text-2xl animate-bounce-short shadow-lg"
                                style={{'--bg-color-from': colors(n)[0], '--bg-color-to': colors(n)[1]}}>
                                {n}
                            </div>
                        )) : <div className="text-slate-300 font-bold text-xl flex items-center h-16">{t.lotto.guide}</div>}
                    </div>
                    <Button onClick={gen} className="bg-emerald-500 hover:bg-emerald-600 text-white px-10 py-4 rounded-full text-lg shadow-emerald-200">
                        <Icon name="clover" className="mr-2" /> {t.lotto.btn}
                    </Button>
                </div>
            );
        };
        
        const DDay = ({ t }) => {
            const [date, setDate] = useState('');
            const [res, setRes] = useState(null);

            useEffect(() => {
                if (date) {
                    const today = new Date();
                    today.setHours(0,0,0,0);
                    const target = new Date(date);
                    const diff = Math.ceil((target - today) / (1000 * 60 * 60 * 24));
                    setRes(diff);
                }
            }, [date]);

            return (
                <div className="grid md:grid-cols-2 gap-6">
                    <div className="bg-slate-50 p-6 rounded-3xl space-y-4">
                         <InputGroup label={t.dday.label}>
                            <input type="date" value={date} onChange={e => setDate(e.target.value)}
                                className="w-full p-4 rounded-xl bg-white border border-slate-200 focus:border-purple-500 outline-none" />
                        </InputGroup>
                        <p className="text-sm text-slate-400">{t.dday.guide}</p>
                    </div>
                    
                    <div className="bg-purple-600 text-white p-8 rounded-3xl flex flex-col items-center justify-center text-center shadow-lg shadow-purple-200 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                        <div className="relative z-10">
                            {res !== null ? (
                                <>
                                    <div className="text-6xl font-bold mb-2">
                                        {res === 0 ? "D-Day" : res > 0 ? `D-${res}` : `D+${Math.abs(res)}`}
                                    </div>
                                    <div className="text-purple-200 font-medium">
                                        {res === 0 ? t.dday.isToday : res > 0 ? t.dday.daysLeft : t.dday.daysPast}
                                    </div>
                                </>
                            ) : <div className="text-purple-200">Select Date</div>}
                        </div>
                    </div>
                </div>
            );
        };


        // --- Layout ---
        const App = () => {
            const [tool, setTool] = useState('text');
            const [lang, setLang] = useState('ko');
            const [menuOpen, setMenuOpen] = useState(false);
            
            const t = translations[lang];

            const tools = [
                { id: 'text', icon: 'type', cat: 'text', color: 'text-blue-500', bg: 'bg-blue-50' },
                { id: 'discount', icon: 'percent', cat: 'calc', color: 'text-pink-500', bg: 'bg-pink-50' },
                { id: 'unit', icon: 'arrow-left-right', cat: 'calc', color: 'text-orange-500', bg: 'bg-orange-50' },
                { id: 'dday', icon: 'calendar', cat: 'calc', color: 'text-purple-500', bg: 'bg-purple-50' },
                { id: 'stopwatch', icon: 'timer', cat: 'time', color: 'text-red-500', bg: 'bg-red-50' },
                { id: 'pomodoro', icon: 'clock', cat: 'time', color: 'text-teal-500', bg: 'bg-teal-50' },
                { id: 'password', icon: 'lock', cat: 'security', color: 'text-indigo-500', bg: 'bg-indigo-50' },
                { id: 'lotto', icon: 'clover', cat: 'fun', color: 'text-emerald-500', bg: 'bg-emerald-50' },
            ];
            
            const activeTool = tools.find(x => x.id === tool);

            return (
                <div className="flex h-screen bg-slate-50">
                    {/* Desktop Sidebar */}
                    <aside className="hidden md:flex flex-col w-72 bg-white border-r border-slate-200 h-full z-20 shadow-sm">
                        <div className="p-8 pb-4">
                            <h1 className="text-2xl font-bold flex items-center gap-3 text-slate-800">
                                <div className="w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200">
                                    <Icon name="box" />
                                </div>
                                UtilityBox
                            </h1>
                            <p className="text-xs text-slate-400 mt-2 ml-1">{t.subtitle}</p>
                        </div>

                        <nav className="flex-1 overflow-y-auto px-6 py-4 space-y-8 custom-scrollbar">
                            {['text', 'calc', 'time', 'security', 'fun'].map(cat => (
                                <div key={cat}>
                                    <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-3">{t.categories[cat]}</h3>
                                    <div className="space-y-1">
                                        {tools.filter(x => x.cat === cat).map(item => (
                                            <button key={item.id} onClick={() => setTool(item.id)}
                                                className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${tool === item.id ? 'bg-slate-800 text-white shadow-md transform scale-[1.02]' : 'text-slate-500 hover:bg-slate-100'}`}>
                                                <Icon name={item.icon} size={18} className={tool === item.id ? 'text-blue-300' : ''} />
                                                {t.tools[item.id]}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </nav>
                        
                         <div className="p-6 border-t border-slate-100">
                             <button onClick={() => setLang(l => l==='ko'?'en':'ko')} className="w-full py-2 border border-slate-200 rounded-lg text-xs font-bold text-slate-500 hover:bg-slate-50">
                                 {lang === 'ko' ? 'Language: ÌïúÍµ≠Ïñ¥' : 'Language: English'}
                             </button>
                         </div>
                    </aside>

                    {/* Mobile Header & Content */}
                    <div className="flex-1 flex flex-col h-full relative overflow-hidden">
                        
                        {/* Mobile Header */}
                        <header className="md:hidden bg-white/80 backdrop-blur-md border-b border-slate-200 p-4 flex justify-between items-center sticky top-0 z-30">
                            <div className="font-bold text-lg flex items-center gap-2 text-slate-800">
                                <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white">
                                    <Icon name="box" size={18} />
                                </div>
                                {t.title}
                            </div>
                            <button onClick={() => setMenuOpen(true)} className="p-2 text-slate-600 bg-slate-100 rounded-full">
                                <Icon name="menu" />
                            </button>
                        </header>

                        {/* Mobile Drawer */}
                        {menuOpen && (
                            <div className="fixed inset-0 z-50 md:hidden">
                                <div className="absolute inset-0 bg-black/20 backdrop-blur-sm" onClick={() => setMenuOpen(false)}></div>
                                <div className="absolute right-0 top-0 bottom-0 w-3/4 bg-white shadow-2xl p-6 overflow-y-auto animate-fade-in">
                                    <div className="flex justify-between items-center mb-8">
                                        <h2 className="font-bold text-xl">{t.title}</h2>
                                        <button onClick={() => setMenuOpen(false)}><Icon name="x" /></button>
                                    </div>
                                    <div className="space-y-6">
                                        {tools.map(item => (
                                            <button key={item.id} onClick={() => { setTool(item.id); setMenuOpen(false); }}
                                                className={`w-full flex items-center gap-4 p-4 rounded-xl text-left transition-all ${tool === item.id ? 'bg-slate-800 text-white shadow-lg' : 'bg-slate-50 text-slate-600'}`}>
                                                <div className={`p-2 rounded-lg bg-white/20`}>
                                                    <Icon name={item.icon} size={20} />
                                                </div>
                                                <span className="font-medium">{t.tools[item.id]}</span>
                                            </button>
                                        ))}
                                    </div>
                                     <div className="mt-8 pt-8 border-t border-slate-100">
                                         <button onClick={() => setLang(l => l==='ko'?'en':'ko')} className="flex items-center gap-2 text-sm font-bold text-slate-500">
                                             <Icon name="globe" size={16} /> {lang.toUpperCase()}
                                         </button>
                                     </div>
                                </div>
                            </div>
                        )}

                        {/* Main Content Area */}
                        <main className="flex-1 overflow-y-auto p-4 md:p-12 relative">
                             {/* Background Decoration */}
                            <div className="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-blue-50/50 to-transparent -z-10"></div>
                            
                            <div className="max-w-3xl mx-auto pb-20 md:pb-0">
                                
                                {/* Header Section */}
                                <div className="mb-8 md:mb-12 animate-fade-in">
                                    <div className="flex items-center gap-3 mb-2">
                                        <div className={`p-2 rounded-lg ${activeTool.bg} ${activeTool.color}`}>
                                            <Icon name={activeTool.icon} />
                                        </div>
                                        <span className="text-sm font-bold text-slate-400 uppercase tracking-wide">{t.categories[activeTool.cat]}</span>
                                    </div>
                                    <h2 className="text-3xl md:text-4xl font-bold text-slate-900">{t.tools[tool]}</h2>
                                </div>

                                {/* Tool Container */}
                                <Card className="min-h-[400px]">
                                    {tool === 'text' && <WordCounter lang={lang} t={t} />}
                                    {tool === 'discount' && <DiscountCalculator t={t} />}
                                    {tool === 'unit' && <UnitConverter t={t} />}
                                    {tool === 'stopwatch' && <Stopwatch t={t} />}
                                    {tool === 'pomodoro' && <Pomodoro t={t} />}
                                    {tool === 'password' && <PasswordGenerator t={t} />}
                                    {tool === 'dday' && <DDay t={t} />}
                                    {tool === 'lotto' && <Lotto t={t} />}
                                </Card>

                                <div className="mt-8 text-center">
                                    <p className="text-xs text-slate-400 flex items-center justify-center gap-2">
                                        <Icon name="shield-check" size={14} /> {t.tip.desc}
                                    </p>
                                </div>
                                
                                {/* Ad Placeholder (Styled) */}
                                <div className="mt-12 border-2 border-dashed border-slate-200 rounded-2xl h-24 flex flex-col items-center justify-center text-slate-300 text-xs">
                                    <span className="font-bold">AD SPACE</span>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
