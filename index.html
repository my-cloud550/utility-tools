<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utility Box Pro - Essential Smart Tools</title>
    <!-- ÌååÎπÑÏΩò ÏÑ§Ï†ï -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì¶</text></svg>">
    
    <!-- ÏµúÏã† ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Firebase SDK (Ìò∏Ìôò Î™®Îìú) -->
    <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap');
        
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* ÌîÑÎ¶¨ÎØ∏ÏóÑ ÎîîÏûêÏù∏ ÌÜ†ÌÅ∞ */
        .glass-panel { @apply bg-white/80 backdrop-blur-md border border-slate-200/50 shadow-xl shadow-slate-200/50; }
        .tool-card { @apply bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm transition-all hover:shadow-xl hover:shadow-slate-200/50; }
        .admin-input { @apply w-full p-4 bg-slate-50 border border-slate-200 rounded-3xl focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all font-bold; }
        
        /* Î°úÎòê Î≤àÌò∏ Í≥µ Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .ball-bounce { animation: bounce 0.5s ease-out; }
        @keyframes bounce { 0% { transform: scale(0); } 70% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        /* Ïª§Ïä§ÌÖÄ Ïä¨ÎùºÏù¥Îçî Ïä§ÌÉÄÏùº */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px; width: 24px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(37, 99, 235, 0.3);
        }
    </style>
</head>
<body class="bg-[#F8FAFC] text-[#1E293B]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- 1. ÌååÏù¥Ïñ¥Î≤†Ïù¥Ïä§ ÏÑ§Ï†ï (Ï£ºÏù∏Ïû•Îãò Ï†ïÎ≥¥) ---
        const firebaseConfig = {
            apiKey: "AIzaSyDwYItXXCjm8srVigEHhYXs3pPaeo5Ee2k",
            authDomain: "my-utility-box-b8fb2.firebaseapp.com",
            projectId: "my-utility-box-b8fb2",
            storageBucket: "my-utility-box-b8fb2.firebasestorage.app",
            messagingSenderId: "939448415088",
            appId: "1:939448415088:web:afe31f30b71fb554a5d5b5",
            measurementId: "G-TCGYQ9YDD8"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const appId = "my-utility-box-b8fb2";

        // --- 2. Îã§Íµ≠Ïñ¥ ÏÇ¨Ï†Ñ (Ï†Ñ Í∏∞Îä• Ìè¨Ìï®) ---
        const translations = {
            ko: {
                title: "Ïú†Ìã∏Î¶¨Ìã∞ Î∞ïÏä§", subtitle: "ÎãπÏã†Ïùò Î™®Îì† ÏöîÍµ¨Î•º ÏúÑÌïú Ïä§ÎßàÌä∏ Ìà¥Î∞ïÏä§",
                categories: { text: "ÌÖçÏä§Ìä∏ ÎèÑÍµ¨", calc: "Í≥ÑÏÇ∞ Î∞è Î≥ÄÌôò", time: "ÏãúÍ∞Ñ Î∞è ÏÉùÏÇ∞ÏÑ±", security: "Î≥¥Ïïà", fun: "Ïû¨ÎØ∏" },
                tools: {
                    text: "Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞", discount: "Ìï†Ïù∏Ïú® Í≥ÑÏÇ∞", unit: "Îã®ÏúÑ Î≥ÄÌôòÍ∏∞",
                    stopwatch: "Ïä§ÌÜ±ÏõåÏπò", pomodoro: "ÎΩÄÎ™®ÎèÑÎ°ú ÌÉÄÏù¥Î®∏", password: "ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±Í∏∞",
                    dday: "D-Day Í≥ÑÏÇ∞Í∏∞", lotto: "Î°úÎòê Î≤àÌò∏ ÏÉùÏÑ±"
                },
                wordCounter: { title: "Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞ & Í≤ÄÏÇ¨Í∏∞", placeholder: "Ïù¥Í≥≥Ïóê ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÍ±∞ÎÇò Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî...", withSpace: "Í≥µÎ∞± Ìè¨Ìï®", noSpace: "Í≥µÎ∞± Ï†úÏô∏", words: "Îã®Ïñ¥ Ïàò", lines: "Ï§Ñ Ïàò" },
                discount: { title: "Ìï†Ïù∏Ïú® Í≥ÑÏÇ∞Í∏∞", price: "ÏõêÎûò Í∞ÄÍ≤©", rate: "Ìï†Ïù∏Ïú®(%)", saved: "Ìï†Ïù∏Îêú Í∏àÏï°", final: "ÏµúÏ¢Ö Íµ¨Îß§ Í∞ÄÍ≤©", currency: "Ïõê" },
                unit: { 
                    title: "ÎßåÎä• Îã®ÏúÑ Î≥ÄÌôòÍ∏∞", input: "ÏûÖÎ†•", result: "Í≤∞Í≥º",
                    length: "Í∏∏Ïù¥", weight: "Î¨¥Í≤å", temp: "Ïò®ÎèÑ",
                    labels: {
                        cm: "ÏÑºÌã∞ÎØ∏ÌÑ∞(cm)", m: "ÎØ∏ÌÑ∞(m)", km: "ÌÇ¨Î°úÎØ∏ÌÑ∞(km)", inch: "Ïù∏Ïπò(in)", ft: "ÌîºÌä∏(ft)", yard: "ÏïºÎìú(yd)",
                        kg: "ÌÇ¨Î°úÍ∑∏Îû®(kg)", g: "Í∑∏Îû®(g)", lb: "ÌååÏö¥Îìú(lb)", oz: "Ïò®Ïä§(oz)",
                        Celsius: "ÏÑ≠Ïî®(‚ÑÉ)", Fahrenheit: "ÌôîÏî®(‚Ñâ)", Kelvin: "ÏºàÎπà(K)", Rankine: "Îû≠ÌÇ®(¬∞R)", Delisle: "ÎçúÎ¶¥(¬∞De)", Newton: "Îâ¥ÌÑ¥(¬∞N)", Reaumur: "Ïó¥Ïî®(¬∞Re)", Romer: "Î°úÎ®∏(¬∞R√∏)"
                    }
                },
                pomodoro: { title: "ÎΩÄÎ™®ÎèÑÎ°ú ÏßëÏ§ë ÌÉÄÏù¥Î®∏", work: "ÏßëÏ§ë ÏãúÍ∞Ñ", break: "Ìú¥Ïãù ÏãúÍ∞Ñ", start: "ÏãúÏûëÌïòÍ∏∞", pause: "ÏùºÏãú Ï†ïÏßÄ", reset: "Ï¥àÍ∏∞Ìôî", statusWork: "üî• ÏßÄÍ∏àÏùÄ ÏßëÏ§ëÌï† ÏãúÍ∞Ñ!", statusBreak: "‚òï Ïû†Ïãú Ïâ¨Ïñ¥Í∞ÄÏÑ∏Ïöî", switchToWork: "ÏßëÏ§ë Î™®Îìú", switchToBreak: "Ìú¥Ïãù Î™®Îìú" },
                password: { title: "ÏïàÏ†ÑÌïú ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±Í∏∞", length: "ÎπÑÎ∞ÄÎ≤àÌò∏ Í∏∏Ïù¥", generate: "Í∞ïÎ†•Ìïú ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±", copied: "ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨Îê®!" },
                dday: { title: "D-Day Í≥ÑÏÇ∞Í∏∞", label: "ÎÇ†Ïßú ÏÑ†ÌÉù", result: "ÎÇ®ÏùÄ ÎÇ†Ïßú", isToday: "üéâ Ïò§ÎäòÏù¥ Î∞îÎ°ú Í∑∏ÎÇ†!", guide: "* Í∏∞ÎÖêÏùºÏù¥ÎÇò Ï§ëÏöîÌïú ÏùºÏ†ïÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî." },
                lotto: { title: "Î°úÎòê ÌñâÏö¥ Î≤àÌò∏ ÏÉùÏÑ±", btn: "Î≤àÌò∏ Ï∂îÏ≤®ÌïòÍ∏∞", guide: "Ïò§ÎäòÏùò ÌñâÏö¥ÏùÑ ÏãúÌóòÌï¥Î≥¥ÏÑ∏Ïöî!" },
                admin: { title: "Í∞úÎ∞úÏûê ÎßàÏä§ÌÑ∞ ÏÑºÌÑ∞", login: "Google Í≥ÑÏ†ïÏúºÎ°ú Í¥ÄÎ¶¨Ïûê Î°úÍ∑∏Ïù∏", save: "ÏÑ§Ï†ï Ï†ÄÏû• Î∞è Î∞òÏòÅ", success: "ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!", labelTitle: "ÏÇ¨Ïù¥Ìä∏ Ï†úÎ™©", labelSubtitle: "ÏÇ¨Ïù¥Ìä∏ ÏÜåÏ†úÎ™©", labelTools: "ÌôúÏÑ±ÌôîÎêú ÎèÑÍµ¨ ÏÑ§Ï†ï", logout: "Î°úÍ∑∏ÏïÑÏõÉ" },
                tip: { title: "üí° Ïú†Ìã∏Î¶¨Ìã∞ Î∞ïÏä§ ÌôúÏö© ÌåÅ", desc: "Ïù¥ Î™®Îì† ÎèÑÍµ¨Îäî ÏÑúÎ≤ÑÎ°ú Îç∞Ïù¥ÌÑ∞Î•º Ï†ÑÏÜ°ÌïòÏßÄ ÏïäÍ≥† Î∏åÎùºÏö∞Ï†Ä ÎÇ¥ÏóêÏÑúÎßå ÏïàÏ†ÑÌïòÍ≤å Ïã§ÌñâÎê©ÎãàÎã§. Í∞úÏù∏Ï†ïÎ≥¥ Í±±Ï†ï ÏóÜÏù¥ ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî!" }
            },
            en: {
                title: "Utility Box", subtitle: "Smart Tools for Your Productivity",
                categories: { text: "Text Tools", calc: "Calc & Convert", time: "Time & Productivity", security: "Security", fun: "Fun" },
                tools: {
                    text: "Word Counter", discount: "Discount Calc", unit: "Unit Converter",
                    stopwatch: "Stopwatch", pomodoro: "Pomodoro Timer", password: "Password Generator",
                    dday: "D-Day Counter", lotto: "Lotto Generator"
                },
                wordCounter: { title: "Word Counter & Checker", placeholder: "Type or paste your text here...", withSpace: "With Space", noSpace: "No Space", words: "Words", lines: "Lines" },
                discount: { title: "Discount Calculator", price: "Original Price", rate: "Discount(%)", saved: "You Save", final: "Final Price", currency: "$" },
                unit: { 
                    title: "Universal Unit Converter", input: "Input", result: "Result",
                    length: "Length", weight: "Weight", temp: "Temp",
                    labels: {
                        cm: "Centimeter(cm)", m: "Meter(m)", km: "Kilometer(km)", inch: "Inch(in)", ft: "Foot(ft)", yard: "Yard(yd)",
                        kg: "Kilogram(kg)", g: "Gram(g)", lb: "Pound(lb)", oz: "Ounce(oz)",
                        Celsius: "Celsius(‚ÑÉ)", Fahrenheit: "Fahrenheit(‚Ñâ)", Kelvin: "Kelvin(K)", Rankine: "Rankine(¬∞R)", Delisle: "Delisle(¬∞De)", Newton: "Newton(¬∞N)", Reaumur: "R√©aumur(¬∞Re)", Romer: "R√∏mer(¬∞R√∏)"
                    }
                },
                pomodoro: { title: "Pomodoro Focus Timer", work: "Work Time", break: "Break Time", start: "Start", pause: "Pause", reset: "Reset", statusWork: "üî• Time to Focus!", statusBreak: "‚òï Time to Rest", switchToWork: "Work Mode", switchToBreak: "Break Mode" },
                password: { title: "Secure Password Gen", length: "Password Length", generate: "Generate Strong Password", copied: "Copied to Clipboard!" },
                dday: { title: "D-Day Counter", label: "Select Date", result: "Result", isToday: "üéâ It's Today!", guide: "* Pick a special date to track." },
                lotto: { title: "Lotto Number Generator", btn: "Generate Lucky Numbers", guide: "Test your luck today!" },
                admin: { title: "Developer Admin Center", login: "Login with Google", save: "Save Configuration", success: "Settings updated successfully!", labelTitle: "Site Title", labelSubtitle: "Site Subtitle", labelTools: "Active Tools Mgmt", logout: "Logout" },
                tip: { title: "üí° Pro Tip", desc: "All tools run locally in your browser for 100% privacy and security. No data leaves your device." }
            }
        };

        // --- 3. Í∞úÎ≥Ñ ÎèÑÍµ¨ Î°úÏßÅ Ïª¥Ìè¨ÎÑåÌä∏Îì§ ---

        // (1) Í∏ÄÏûê Ïàò ÏÑ∏Í∏∞
        const WordCounter = ({ lang }) => {
            const [text, setText] = useState('');
            const t = translations[lang].wordCounter;
            const stats = {
                withSpace: text.length,
                noSpace: text.replace(/\s/g, '').length,
                words: text.trim() ? text.trim().split(/\s+/).length : 0,
                lines: text ? text.split('\n').length : 0
            };
            return (
                <div className="tool-card">
                    <div className="flex items-center gap-4 mb-8">
                        <div className="w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600"><i data-lucide="type" className="w-8 h-8"></i></div>
                        <h2 className="text-3xl font-black tracking-tight">{t.title}</h2>
                    </div>
                    <textarea 
                        className="w-full h-80 p-6 bg-slate-50 border border-slate-100 rounded-[32px] focus:ring-8 focus:ring-blue-500/5 focus:border-blue-500 outline-none resize-none mb-8 text-xl leading-relaxed" 
                        placeholder={t.placeholder} 
                        value={text} 
                        onChange={e=>setText(e.target.value)} 
                    />
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        {[
                            { label: t.withSpace, value: stats.withSpace, color: "text-blue-600", bg: "bg-blue-50" },
                            { label: t.noSpace, value: stats.noSpace, color: "text-indigo-600", bg: "bg-indigo-50" },
                            { label: t.words, value: stats.words, color: "text-emerald-600", bg: "bg-emerald-50" },
                            { label: t.lines, value: stats.lines, color: "text-amber-600", bg: "bg-amber-50" }
                        ].map((s, i) => (
                            <div key={i} className={`p-6 ${s.bg} rounded-[28px] text-center`}>
                                <div className="text-[10px] text-slate-400 font-black uppercase tracking-widest mb-2">{s.label}</div>
                                <div className={`text-3xl font-black ${s.color}`}>{s.value.toLocaleString()}</div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // (2) Ìï†Ïù∏Ïú® Í≥ÑÏÇ∞Í∏∞
        const DiscountCalculator = ({ lang }) => {
            const [price, setPrice] = useState('');
            const [rate, setRate] = useState('');
            const t = translations[lang].discount;
            const saved = price && rate ? (price * (rate / 100)) : 0;
            const final = price && rate ? price - saved : 0;
            return (
                <div className="tool-card">
                    <div className="flex items-center gap-4 mb-10">
                        <div className="w-14 h-14 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-500"><i data-lucide="percent" className="w-8 h-8"></i></div>
                        <h2 className="text-3xl font-black tracking-tight">{t.title}</h2>
                    </div>
                    <div className="grid md:grid-cols-2 gap-12">
                        <div className="space-y-6">
                            <div><label className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block">{t.price}</label><input type="number" className="admin-input text-2xl" value={price} onChange={e=>setPrice(Number(e.target.value))} placeholder="0" /></div>
                            <div><label className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block">{t.rate}</label><input type="number" className="admin-input text-2xl" value={rate} onChange={e=>setRate(Number(e.target.value))} placeholder="0" /></div>
                        </div>
                        <div className="bg-gradient-to-br from-pink-500 to-rose-600 rounded-[40px] p-10 flex flex-col justify-center text-center shadow-xl shadow-pink-200">
                            <div className="text-pink-100 text-sm font-bold mb-2 uppercase tracking-widest">{t.final}</div>
                            <div className="text-6xl font-black text-white tracking-tighter mb-4">{final.toLocaleString()}<span className="text-2xl ml-1">{t.won}</span></div>
                            <div className="text-pink-200 text-sm font-bold">{t.saved}: {saved.toLocaleString()}{t.won}</div>
                        </div>
                    </div>
                </div>
            );
        };

        // (3) Îã®ÏúÑ Î≥ÄÌôòÍ∏∞ (ÌíÄ Î°úÏßÅ)
        const UnitConverter = ({ lang }) => {
            const [type, setType] = useState('length');
            const [val, setVal] = useState('');
            const [from, setFrom] = useState('cm');
            const [to, setTo] = useState('inch');
            const t = translations[lang].unit;

            const units = {
                length: ['cm', 'm', 'km', 'inch', 'ft', 'yard'],
                weight: ['kg', 'g', 'lb', 'oz'],
                temp: ['Celsius', 'Fahrenheit', 'Kelvin', 'Rankine', 'Delisle', 'Newton', 'Reaumur', 'Romer']
            };

            const solve = () => {
                if (!val) return '0';
                const v = parseFloat(val);
                if (type === 'temp') {
                    if (from === to) return v;
                    let c;
                    switch(from) {
                        case 'Celsius': c = v; break;
                        case 'Fahrenheit': c = (v-32)*5/9; break;
                        case 'Kelvin': c = v-273.15; break;
                        case 'Rankine': c = (v-491.67)*5/9; break;
                        case 'Delisle': c = 100 - v*2/3; break;
                        case 'Newton': c = v*100/33; break;
                        case 'Reaumur': c = v*5/4; break;
                        case 'Romer': c = (v-7.5)*40/21; break;
                    }
                    let r;
                    switch(to) {
                        case 'Celsius': r = c; break;
                        case 'Fahrenheit': r = c*9/5+32; break;
                        case 'Kelvin': r = c+273.15; break;
                        case 'Rankine': r = (c+273.15)*9/5; break;
                        case 'Delisle': r = (100-c)*3/2; break;
                        case 'Newton': r = c*33/100; break;
                        case 'Reaumur': r = c*4/5; break;
                        case 'Romer': r = c*21/40+7.5; break;
                    }
                    return Number.isInteger(r) ? r : r.toFixed(4);
                }
                const map = {
                    cm: 1, m: 100, km: 100000, inch: 2.54, ft: 30.48, yard: 91.44,
                    g: 1, kg: 1000, lb: 453.592, oz: 28.3495
                };
                const res = (v * map[from]) / map[to];
                return Number.isInteger(res) ? res : res.toFixed(4);
            };

            useEffect(() => {
                if(type === 'length') { setFrom('cm'); setTo('m'); }
                else if(type === 'weight') { setFrom('kg'); setTo('g'); }
                else { setFrom('Celsius'); setTo('Fahrenheit'); }
                setVal('');
            }, [type]);

            return (
                <div className="tool-card">
                    <div className="flex items-center gap-4 mb-8">
                        <div className="w-14 h-14 bg-orange-100 rounded-2xl flex items-center justify-center text-orange-500"><i data-lucide="arrow-left-right" className="w-8 h-8"></i></div>
                        <h2 className="text-3xl font-black tracking-tight">{t.title}</h2>
                    </div>
                    <div className="flex gap-2 mb-10 p-2 bg-slate-100 rounded-[28px]">
                        {['length', 'weight', 'temp'].map(k => (
                            <button key={k} onClick={()=>setType(k)} className={`flex-1 py-4 rounded-[22px] font-black text-sm uppercase tracking-widest transition-all ${type === k ? 'bg-white text-orange-600 shadow-md' : 'text-slate-400'}`}>
                                {t[k]}
                            </button>
                        ))}
                    </div>
                    <div className="grid md:grid-cols-2 gap-8 items-center">
                        <div className="space-y-3">
                            <label className="text-[10px] font-black text-slate-400 uppercase ml-2 tracking-widest">{t.input}</label>
                            <div className="flex gap-2">
                                <input type="number" className="flex-1 admin-input" value={val} onChange={e=>setVal(e.target.value)} placeholder="0" />
                                <select className="p-4 bg-white border border-slate-200 rounded-3xl font-bold outline-none" value={from} onChange={e=>setFrom(e.target.value)}>
                                    {units[type].map(u => <option key={u} value={u}>{t.labels[u]}</option>)}
                                </select>
                            </div>
                        </div>
                        <div className="space-y-3">
                            <label className="text-[10px] font-black text-slate-400 uppercase ml-2 tracking-widest">{t.result}</label>
                            <div className="flex gap-2">
                                <input type="text" readOnly className="flex-1 admin-input bg-orange-50 text-orange-600 border-orange-100" value={solve()} />
                                <select className="p-4 bg-white border border-slate-200 rounded-3xl font-bold outline-none" value={to} onChange={e=>setTo(e.target.value)}>
                                    {units[type].map(u => <option key={u} value={u}>{t.labels[u]}</option>)}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // (4) ÎΩÄÎ™®ÎèÑÎ°ú ÌÉÄÏù¥Î®∏ (ÏÜåÎ¶¨ Ìè¨Ìï®)
        const PomodoroTimer = ({ lang }) => {
            const [timeLeft, setTimeLeft] = useState(25 * 60);
            const [isActive, setIsActive] = useState(false);
            const [isWork, setIsWork] = useState(true);
            const t = translations[lang].pomodoro;
            const playSound = () => { try { const ctx = new (window.AudioContext || window.webkitAudioContext)(); const osc = ctx.createOscillator(); const gain = ctx.createGain(); osc.connect(gain); gain.connect(ctx.destination); osc.type='sine'; osc.frequency.value=523.25; gain.gain.value=0.1; osc.start(); osc.stop(ctx.currentTime+0.5); } catch(e){} };
            useEffect(() => {
                let interval = null;
                if (isActive && timeLeft > 0) interval = setInterval(() => setTimeLeft(t => t - 1), 1000);
                else if (timeLeft === 0) { setIsActive(false); playSound(); }
                return () => clearInterval(interval);
            }, [isActive, timeLeft]);
            return (
                <div className="tool-card text-center py-12">
                    <h2 className="text-3xl font-black mb-6 flex items-center justify-center gap-3 text-orange-500"><i data-lucide="clock"></i> {t.title}</h2>
                    <div className={`inline-block px-6 py-2 rounded-full text-xs font-black uppercase tracking-[0.2em] mb-12 ${isWork ? 'bg-orange-100 text-orange-600' : 'bg-green-100 text-green-600'}`}>{isWork ? t.statusWork : t.statusBreak}</div>
                    <div className="text-[140px] font-mono font-black text-slate-800 leading-none mb-12 tracking-tighter drop-shadow-sm">{`${Math.floor(timeLeft/60).toString().padStart(2,'0')}:${(timeLeft%60).toString().padStart(2,'0')}`}</div>
                    <div className="flex justify-center gap-5 mb-10">
                        <button onClick={() => setIsActive(!isActive)} className="px-14 py-5 bg-orange-500 text-white rounded-[32px] font-black text-xl shadow-2xl shadow-orange-200 active:scale-95 transition-all">{isActive ? t.pause : t.start}</button>
                        <button onClick={() => { setIsActive(false); setTimeLeft(isWork ? 25*60 : 5*60); }} className="px-14 py-5 bg-slate-100 text-slate-400 rounded-[32px] font-black text-xl active:scale-95 transition-all">{t.reset}</button>
                    </div>
                    <button onClick={()=>{setIsWork(!isWork); setIsActive(false); setTimeLeft(!isWork?25*60:5*60)}} className="text-sm font-bold text-slate-300 hover:text-orange-500 underline transition-colors">{isWork ? t.switchToBreak : t.switchToWork}</button>
                </div>
            );
        };

        // (5) ÎπÑÎ∞ÄÎ≤àÌò∏ ÏÉùÏÑ±Í∏∞
        const PasswordGenerator = ({ lang }) => {
            const [pass, setPass] = useState('');
            const [len, setLen] = useState(16);
            const [copied, setCopied] = useState(false);
            const t = translations[lang].password;
            const gen = () => {
                const c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]:;?><,./-=";
                let r = ""; for(let i=0; i<len; i++) r += c[Math.floor(Math.random()*c.length)];
                setPass(r); setCopied(false);
            };
            useEffect(gen, [len]);
            return (
                <div className="tool-card">
                    <h2 className="text-2xl font-black mb-8 flex items-center gap-3 text-indigo-600"><i data-lucide="lock"></i> {t.title}</h2>
                    <div className="p-8 bg-slate-50 border border-slate-100 rounded-[36px] mb-8 font-mono text-3xl flex justify-between items-center break-all text-slate-700 shadow-inner">
                        {pass}
                        <button onClick={()=>{navigator.clipboard.writeText(pass); setCopied(true); setTimeout(()=>setCopied(false),2000)}} className="ml-6 p-4 bg-white rounded-3xl shadow-sm hover:shadow-xl transition-all"><i data-lucide={copied?"check":"copy"} className={copied?"text-green-500":"text-indigo-400"}></i></button>
                    </div>
                    <div className="space-y-6">
                        <div className="flex justify-between text-xs font-black text-slate-300 uppercase tracking-widest px-2"><span>{t.length}</span><span className="text-indigo-500">{len}</span></div>
                        <input type="range" min="8" max="48" value={len} onChange={e=>setLen(e.target.value)} className="w-full h-3 bg-slate-200 rounded-full appearance-none cursor-pointer accent-indigo-600 mb-6" />
                        <button onClick={gen} className="w-full py-5 bg-indigo-600 text-white rounded-[32px] font-black text-xl shadow-xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all">{t.generate}</button>
                    </div>
                </div>
            );
        };

        // (6) D-Day Í≥ÑÏÇ∞Í∏∞
        const DDayCalculator = ({ lang }) => {
            const [date, setDate] = useState('');
            const [res, setRes] = useState(null);
            const t = translations[lang].dday;
            useEffect(() => {
                if (date) {
                    const today = new Date(); today.setHours(0,0,0,0);
                    const target = new Date(date); target.setHours(0,0,0,0);
                    setRes(Math.ceil((target - today) / (1000 * 60 * 60 * 24)));
                } else setRes(null);
            }, [date]);
            return (
                <div className="tool-card">
                    <h2 className="text-2xl font-black mb-8 flex items-center gap-3 text-purple-600"><i data-lucide="calendar"></i> {t.title}</h2>
                    <div className="grid md:grid-cols-2 gap-10 items-center">
                        <div className="space-y-6">
                            <label className="text-sm font-black text-slate-400 uppercase tracking-widest block ml-2">{t.label}</label>
                            <input type="date" lang={lang} value={date} onChange={e=>setDate(e.target.value)} className="w-full p-5 bg-slate-50 border border-slate-100 rounded-[32px] outline-none focus:ring-8 focus:ring-purple-500/5 focus:border-purple-500 font-bold" />
                            <p className="text-[10px] text-slate-300 font-bold ml-2 leading-relaxed">{t.guide}</p>
                        </div>
                        <div className="bg-gradient-to-br from-purple-600 to-indigo-700 rounded-[44px] p-12 text-center shadow-2xl shadow-purple-200 border-4 border-white/20">
                            <div className="text-purple-200 text-[10px] font-black mb-3 uppercase tracking-[0.3em]">{t.result}</div>
                            <div className="text-6xl font-black text-white tracking-tighter">
                                {res === null ? "-" : res === 0 ? t.isToday : res > 0 ? `D-${res}` : `D+${Math.abs(res)}`}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // (7) Î°úÎòê Î≤àÌò∏ ÏÉùÏÑ±Í∏∞
        const LottoGenerator = ({ lang }) => {
            const [nums, setNums] = useState([]);
            const t = translations[lang].lotto;
            const draw = () => {
                const s = new Set();
                while(s.size < 6) s.add(Math.floor(Math.random()*45)+1);
                setNums([...s].sort((a,b)=>a-b));
            };
            const getColor = (n) => {
                if(n<=10) return 'bg-amber-400'; if(n<=20) return 'bg-blue-400';
                if(n<=30) return 'bg-red-400'; if(n<=40) return 'bg-slate-400';
                return 'bg-emerald-400';
            };
            return (
                <div className="tool-card text-center">
                    <h2 className="text-2xl font-black mb-4 flex items-center justify-center gap-3 text-emerald-600"><i data-lucide="clover"></i> {t.title}</h2>
                    <p className="text-slate-400 text-sm mb-12 font-medium">{t.guide}</p>
                    <div className="flex flex-wrap justify-center gap-4 mb-12 min-h-[80px]">
                        {nums.map((n, i) => (
                            <div key={i} className={`${getColor(n)} w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-lg ball-bounce border-4 border-white/30`}>{n}</div>
                        ))}
                    </div>
                    <button onClick={draw} className="px-12 py-5 bg-emerald-600 text-white rounded-[32px] font-black text-xl shadow-xl shadow-emerald-100 hover:bg-emerald-700 active:scale-95 transition-all flex items-center gap-3 mx-auto">
                        <i data-lucide="sparkles"></i> {t.btn}
                    </button>
                </div>
            );
        };

        // --- 4. Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú (CMS) ---
        const AdminPanel = ({ config, onUpdate }) => {
            const [user, setUser] = useState(null);
            const [local, setLocal] = useState(config);
            const [status, setStatus] = useState('');
            useEffect(() => { const unsub = auth.onAuthStateChanged(u => setUser(u)); return () => unsub(); }, []);
            const login = async () => { const p = new firebase.auth.GoogleAuthProvider(); try { await auth.signInWithPopup(p); } catch(e) { setStatus("Error: " + e.message); } };
            const save = async () => {
                setStatus('Ï†ÄÏû• Ï§ë...');
                try {
                    await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('settings').doc('global').set(local);
                    onUpdate(local); setStatus(translations[config.lang].admin.success);
                    setTimeout(() => setStatus(''), 3000);
                } catch(e) { setStatus('Ï†ÄÏû• Ïã§Ìå®: Í∂åÌïú Î∂ÄÏ°±'); }
            };

            if (!user) return (
                <div className="bg-white p-14 rounded-[50px] border shadow-2xl text-center max-w-lg mx-auto mt-10">
                    <div className="w-24 h-24 bg-blue-50 rounded-[36px] flex items-center justify-center mx-auto mb-10 text-blue-600 shadow-inner"><i data-lucide="shield-check" className="w-12 h-12"></i></div>
                    <h2 className="text-4xl font-black mb-4 tracking-tighter">Admin Access</h2>
                    <p className="text-slate-400 mb-12 text-base font-medium">Please login with your Google account to modify the site configuration.</p>
                    <button onClick={login} className="w-full py-5 bg-white border-2 border-slate-100 rounded-[32px] font-black flex items-center justify-center gap-4 hover:bg-slate-50 transition-all shadow-sm">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" className="w-6 h-6" />
                        Continue with Google
                    </button>
                    {status && <p className="mt-8 text-red-500 text-xs font-bold uppercase tracking-widest">{status}</p>}
                </div>
            );

            return (
                <div className="bg-white p-12 rounded-[50px] border-2 border-blue-50 shadow-sm max-w-3xl mx-auto">
                    <div className="flex justify-between items-start mb-14 pb-10 border-b border-slate-50">
                        <div>
                            <h2 className="text-3xl font-black text-slate-800 tracking-tighter leading-none mb-3">{translations[local.lang].admin.title}</h2>
                            <p className="text-[10px] text-blue-500 font-black uppercase tracking-[0.2em]">{user.email} Verified</p>
                        </div>
                        <div className="flex gap-3">
                            <button onClick={()=>auth.signOut()} className="px-6 py-3 text-[10px] font-black text-slate-300 hover:text-red-400 transition-colors uppercase tracking-widest">Logout</button>
                            <button onClick={save} className="btn-primary px-10">{translations[local.lang].admin.save}</button>
                        </div>
                    </div>
                    {status && <div className="mb-10 p-5 bg-blue-600 text-white rounded-[24px] text-center font-black shadow-lg shadow-blue-200 animate-pulse">{status}</div>}
                    <div className="space-y-12">
                        <div className="grid md:grid-cols-2 gap-8">
                            <section>
                                <label className="text-[10px] font-black uppercase text-slate-300 tracking-[0.3em] mb-4 block pl-1">{translations[local.lang].admin.labelTitle}</label>
                                <input className="admin-input text-2xl font-black tracking-tight" value={local.siteTitle} onChange={e=>setLocal({...local, siteTitle:e.target.value})} />
                            </section>
                            <section>
                                <label className="text-[10px] font-black uppercase text-slate-300 tracking-[0.3em] mb-4 block pl-1">{translations[local.lang].admin.labelSubtitle}</label>
                                <input className="admin-input text-sm font-bold" value={local.siteSubtitle} onChange={e=>setLocal({...local, siteSubtitle:e.target.value})} />
                            </section>
                        </div>
                        <section>
                            <label className="text-[10px] font-black uppercase text-slate-300 tracking-[0.3em] mb-6 block pl-1">{translations[local.lang].admin.labelTools}</label>
                            <div className="grid grid-cols-2 sm:grid-cols-3 gap-4">
                                {Object.keys(translations.ko.tools).map(tool => (
                                    <label key={tool} className={`flex items-center gap-4 p-6 rounded-[32px] border-2 cursor-pointer transition-all ${local.activeTools.includes(tool) ? 'bg-blue-50 border-blue-200' : 'bg-slate-50 border-transparent opacity-40 grayscale'}`}>
                                        <input type="checkbox" className="w-6 h-6 rounded-lg border-slate-300 text-blue-600 focus:ring-0" checked={local.activeTools.includes(tool)} onChange={e => {
                                            const next = e.target.checked ? [...local.activeTools, tool] : local.activeTools.filter(t => t !== tool);
                                            setLocal({...local, activeTools: next});
                                        }} /> 
                                        <span className="text-sm font-black capitalize text-slate-700">{tool}</span>
                                    </label>
                                ))}
                            </div>
                        </section>
                    </div>
                </div>
            );
        };

        // --- 5. Î©îÏù∏ Ïï± ÌîÑÎ†àÏûÑÏõåÌÅ¨ ---
        const App = () => {
            const [config, setConfig] = useState(null);
            const [current, setCurrent] = useState('text');
            const [lang, setLang] = useState('ko');
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);

            useEffect(() => {
                const init = async () => {
                    try {
                        const doc = await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('settings').doc('global').get();
                        setConfig(doc.exists ? doc.data() : DEFAULT_CONFIG);
                    } catch(e) { setConfig(DEFAULT_CONFIG); }
                };
                init();
                const handleHash = () => {
                    const hash = window.location.hash.replace('#/', '') || 'text';
                    setCurrent(hash);
                    setIsSidebarOpen(false);
                };
                window.addEventListener('hashchange', handleHash); handleHash();
                return () => window.removeEventListener('hashchange', handleHash);
            }, []);

            useEffect(() => { if (window.lucide) window.lucide.createIcons(); if (config) document.title = config.siteTitle; }, [current, config, lang]);

            if (!config) return (
                <div className="min-h-screen flex flex-col items-center justify-center bg-white">
                    <div className="w-16 h-16 border-8 border-blue-600 border-t-transparent rounded-full animate-spin mb-6"></div>
                    <div className="font-black text-slate-200 tracking-[0.5em] uppercase text-sm animate-pulse font-mono">Connecting Node...</div>
                </div>
            );

            const t = translations[lang];

            const renderTool = () => {
                const p = { lang };
                switch(current) {
                    case 'admin': return <AdminPanel config={config} onUpdate={setConfig} />;
                    case 'text': return <WordCounter {...p} />;
                    case 'discount': return <DiscountCalculator {...p} />;
                    case 'unit': return <UnitConverter {...p} />;
                    case 'pomodoro': return <PomodoroTimer {...p} />;
                    case 'password': return <PasswordGenerator {...p} />;
                    case 'dday': return <DDayCalculator {...p} />;
                    case 'lotto': return <LottoGenerator {...p} />;
                    default: return <div className="tool-card p-24 text-center font-black text-slate-100 italic text-6xl uppercase tracking-tighter">Syncing {current}...</div>;
                }
            };

            return (
                <div className="min-h-screen flex flex-col md:flex-row bg-[#F8FAFC]">
                    {/* Î™®Î∞îÏùº ÏµúÏÉÅÎã® Î∞î */}
                    <header className="md:hidden glass-panel p-5 flex justify-between items-center sticky top-0 z-50 rounded-b-[30px]">
                        <div className="font-black text-blue-600 text-2xl tracking-tighter uppercase">{config.siteTitle}</div>
                        <button onClick={()=>setIsSidebarOpen(!isSidebarOpen)} className="p-3 bg-slate-50 rounded-2xl"><i data-lucide="menu"></i></button>
                    </header>

                    {/* Îç∞Ïä§ÌÅ¨ÌÉë ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏÇ¨Ïù¥ÎìúÎ∞î */}
                    <aside className={`fixed inset-y-0 left-0 z-40 w-80 bg-white border-r border-slate-100 transform transition-transform duration-700 ease-in-out md:translate-x-0 ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full shadow-none'} flex flex-col`}>
                        <div className="p-12 pb-8">
                            <div className="flex items-center gap-4 mb-3">
                                <div className="w-14 h-14 bg-blue-600 rounded-[24px] flex items-center justify-center text-white shadow-2xl shadow-blue-200"><i data-lucide="box" className="w-8 h-8"></i></div>
                                <h1 className="text-3xl font-black text-slate-900 tracking-tighter leading-none">{config.siteTitle}</h1>
                            </div>
                            <p className="text-[10px] text-slate-300 font-black uppercase tracking-[0.4em] pl-1">{config.siteSubtitle}</p>
                        </div>
                        
                        <nav className="px-8 flex-1 space-y-2 overflow-y-auto hide-scrollbar py-4">
                            {config.activeTools.map(tool => (
                                <a key={tool} href={`#/${tool}`} className={`flex items-center gap-5 px-7 py-5 rounded-[28px] text-[15px] font-black transition-all ${current === tool ? 'bg-blue-600 text-white shadow-2xl shadow-blue-200 -translate-y-1' : 'text-slate-400 hover:bg-slate-50 hover:text-slate-900'}`}>
                                    <i data-lucide={tool === 'text' ? 'type' : tool === 'pomodoro' ? 'clock' : tool === 'password' ? 'lock' : tool === 'dday' ? 'calendar' : tool === 'unit' ? 'arrow-left-right' : tool === 'discount' ? 'percent' : 'tool'} className="w-5 h-5"></i>
                                    <span className="capitalize">{t.tools[tool] || tool}</span>
                                </a>
                            ))}
                        </nav>

                        <div className="p-8 mt-auto space-y-4">
                            <div className="flex gap-2 p-2 bg-slate-50 rounded-3xl border border-slate-100">
                                <button onClick={()=>setLang('ko')} className={`flex-1 py-3 text-[10px] font-black rounded-2xl transition-all ${lang==='ko'?'bg-white text-slate-900 shadow-sm border border-slate-100':'text-slate-300'}`}>KOREA</button>
                                <button onClick={()=>setLang('en')} className={`flex-1 py-3 text-[10px] font-black rounded-2xl transition-all ${lang==='en'?'bg-white text-slate-900 shadow-sm border border-slate-100':'text-slate-300'}`}>GLOBAL</button>
                            </div>
                            <a href="#/admin" className={`group flex items-center justify-center gap-3 py-5 rounded-[28px] text-[11px] font-black transition-all border-2 ${current === 'admin' ? 'bg-slate-900 text-white border-slate-900 shadow-2xl' : 'bg-transparent text-slate-300 border-slate-100 hover:text-slate-900 hover:border-slate-300'}`}>
                                <i data-lucide="shield-check" className="w-4 h-4 group-hover:animate-pulse"></i> {t.admin.title.toUpperCase()}
                            </a>
                        </div>
                    </aside>

                    {/* Î©îÏù∏ Î∑∞Ìè¨Ìä∏ (Ïö∞Ï∏° ÏòÅÏó≠) */}
                    <main className="flex-1 p-6 md:p-16 lg:p-24 overflow-y-auto h-screen relative scroll-smooth">
                        <div className="max-w-4xl mx-auto space-y-16 pb-20">
                            
                            {/* ÏÉÅÎã® Í¥ëÍ≥† Ïä¨Î°Ø ÎîîÏûêÏù∏ */}
                            <div className="h-32 bg-white rounded-[44px] border-4 border-dashed border-slate-100 flex flex-col items-center justify-center text-slate-200 text-xs font-black tracking-[0.3em] shadow-inner relative overflow-hidden group">
                                <div className="absolute inset-0 bg-blue-500/0 group-hover:bg-blue-500/5 transition-all"></div>
                                <i data-lucide="layout" className="mb-3 w-8 h-8 opacity-20"></i>
                                <span className="relative z-10 font-mono">GOOGLE ADSENSE PLACEMENT (728x90)</span>
                            </div>

                            {/* ÎèÑÍµ¨ Ïã§Ï†ú ÎÇ¥Ïö© Ï∂úÎ†• */}
                            <div className="animate-in fade-in slide-in-from-bottom-8 duration-700">
                                {renderTool()}
                            </div>

                            {/* ÌïòÎã® Ï†ïÎ≥¥ Ïπ¥Îìú */}
                            <div className="p-12 bg-white rounded-[50px] border border-slate-100 shadow-sm relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-32 h-32 bg-blue-500/5 rounded-full -mr-16 -mt-16 blur-3xl"></div>
                                <h4 className="font-black text-slate-900 mb-4 flex items-center gap-3 text-xl"><i data-lucide="sparkles" className="w-6 h-6 text-blue-500"></i> {t.tip.title}</h4>
                                <p className="text-slate-400 text-sm leading-[1.8] font-medium max-w-2xl">{t.tip.desc}</p>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
